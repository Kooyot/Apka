<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<meta name="theme-color" content="#ff6b2b">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="./manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<title>DIET MASTER V7 â€” ULTRA</title>
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js" defer></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Outfit:wght@300;400;500;600;700;800;900&display=swap');
:root{
--bg:#06090f;--bg2:#0c1018;--bg3:#131a28;--bg4:#1a2336;--bg5:#243048;
--or:#ff6b2b;--or2:#ff8f5e;--or-g:rgba(255,107,43,.1);
--gr:#34d399;--gr-g:rgba(52,211,153,.1);
--rd:#f87171;--rd-g:rgba(248,113,113,.1);
--bl:#60a5fa;--bl-g:rgba(96,165,250,.1);
--pr:#a78bfa;--pr-g:rgba(167,139,250,.1);
--cy:#22d3ee;--cy-g:rgba(34,211,238,.1);
--yl:#fbbf24;--yl-g:rgba(251,191,36,.1);
--t1:#f0f2f5;--t2:#94a3b8;--t3:#475569;
--brd:rgba(255,255,255,.06);--brd2:rgba(255,107,43,.25);
--rad:16px;--rad2:12px;--rad3:8px;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--t1);line-height:1.6;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg2)}::-webkit-scrollbar-thumb{background:var(--bg5);border-radius:2px}

/* HEADER */
header{position:fixed;top:0;left:0;right:0;height:56px;background:rgba(12,16,24,.92);border-bottom:1px solid var(--brd2);display:flex;align-items:center;padding:0 14px;z-index:100;gap:10px;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
.hbtn{width:40px;height:40px;border-radius:var(--rad3);border:none;background:var(--or);color:#fff;font-size:1.2em;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;flex-shrink:0}
.hbtn:active{transform:scale(.9)}.hbtn.x{background:var(--rd)}
.htitle{flex:1;overflow:hidden}.htitle h1{font-family:'JetBrains Mono',monospace;font-size:.85em;color:var(--or);white-space:nowrap;letter-spacing:-.02em}.htitle span{font-size:.65em;color:var(--t3);font-family:'JetBrains Mono',monospace}
.hbadge{background:var(--bg3);border:1px solid var(--brd);padding:3px 8px;border-radius:16px;font-family:'JetBrains Mono',monospace;font-size:.7em;color:var(--t2);white-space:nowrap}
.hbadge b{color:var(--or)}

/* NAV */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:98;opacity:0;pointer-events:none;transition:.3s}.overlay.on{opacity:1;pointer-events:auto}
nav{position:fixed;top:56px;left:0;width:260px;height:calc(100vh - 56px);background:var(--bg2);border-right:1px solid var(--brd);z-index:99;transform:translateX(-100%);transition:.3s;overflow-y:auto;padding:10px}
nav.on{transform:translateX(0)}
.nlbl{font-size:.58em;color:var(--t3);text-transform:uppercase;letter-spacing:.15em;margin:12px 0 5px 10px;font-weight:700}
.nbtn{display:block;width:100%;padding:10px 12px;background:transparent;border:1px solid transparent;border-radius:var(--rad3);color:var(--t2);font-size:.85em;font-weight:600;text-align:left;cursor:pointer;transition:.2s;margin-bottom:2px;font-family:'Outfit',sans-serif}
.nbtn:hover{background:var(--or-g);border-color:var(--brd2);color:var(--t1)}
.nbtn.on{background:linear-gradient(135deg,var(--or),var(--or2));color:#fff;border-color:transparent}
.nbtn span{margin-right:6px}

/* MAIN */
main{padding:72px 14px 40px;max-width:880px;margin:0 auto}
.sec{display:none;animation:secIn .35s cubic-bezier(.22,.61,.36,1)}.sec.on{display:block}
@keyframes secIn{0%{opacity:0;transform:translateY(16px) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}

/* NAV ICONS */
.nbtn .ni{display:inline-flex;width:20px;height:20px;align-items:center;justify-content:center;margin-right:6px;vertical-align:middle}
.nbtn .ni svg{width:16px;height:16px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.nbtn.on .ni svg{stroke:#fff}

/* CARD HOVER */
.c{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--rad);padding:16px;margin-bottom:14px;transition:border-color .25s,box-shadow .25s}
.c:hover{border-color:var(--brd2);box-shadow:0 4px 24px rgba(255,107,43,.06)}

/* QA RIPPLE */
.qa{position:relative;overflow:hidden}
.qa::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at var(--x,50%) var(--y,50%),rgba(255,107,43,.15) 0%,transparent 60%);opacity:0;transition:opacity .4s}
.qa:active::after{opacity:1}

/* BTN RIPPLE */
.btn{position:relative;overflow:hidden}
.btn::after{content:'';position:absolute;inset:0;background:rgba(255,255,255,.15);transform:scaleX(0);transform-origin:left;transition:transform .3s}
.btn:active::after{transform:scaleX(1)}

/* SMOOTH MEAL CARD ENTER */
.mc{transition:opacity .2s,transform .2s}

/* PILL PRESS */
.pill{transition:all .15s cubic-bezier(.22,.61,.36,1)}
.pill:active{transform:scale(.92)}

/* PROGRESS RING GLOW */
.pring svg{transition:filter .5s}

/* SHOPPING GENERATOR */
.shopgen{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:14px;margin-top:14px}
.shopgen h3{color:var(--or);font-size:.9em;margin-bottom:10px}
.sg-days{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px}
.sg-day{padding:6px 12px;border:2px solid var(--brd);border-radius:var(--rad3);font-size:.78em;font-weight:600;cursor:pointer;transition:.2s;background:var(--bg3);color:var(--t2)}
.sg-day:hover{border-color:var(--or)}
.sg-day.sel{background:var(--or-g);border-color:var(--or);color:var(--or)}
.sg-result{margin-top:12px}
.sg-item{display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid var(--brd);font-size:.82em}
.sg-item:last-child{border-bottom:none}
.sg-item .sg-n{flex:1;color:var(--t1)}.sg-item .sg-a{color:var(--gr);font-weight:600;font-family:'JetBrains Mono',monospace}

/* TOAST UPGRADE */
.toast{backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}

/* NAV SMOOTH */
nav{transition:transform .35s cubic-bezier(.22,.61,.36,1)}
.overlay{transition:opacity .35s}
.ch{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:10px;border-bottom:1px solid var(--brd)}.ch h2{font-size:1em;font-weight:700;color:var(--or);flex:1}.ch .ico{width:32px;height:32px;background:var(--or-g);border-radius:var(--rad3);display:flex;align-items:center;justify-content:center;font-size:1em;flex-shrink:0}

/* GRIDS */
.g2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
@media(max-width:700px){.g2{grid-template-columns:1fr}}
@media(max-width:500px){.g3{grid-template-columns:repeat(2,1fr)}.g4{grid-template-columns:repeat(2,1fr)}}

/* STAT BOXES */
.sb{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:12px 8px;text-align:center}
.sv{font-size:1.5em;font-weight:800;color:var(--or);font-family:'JetBrains Mono',monospace}
.sl{font-size:.6em;color:var(--t3);text-transform:uppercase;margin-top:2px;font-weight:600}
.sb.gr .sv{color:var(--gr)}.sb.bl .sv{color:var(--bl)}.sb.cy .sv{color:var(--cy)}.sb.rd .sv{color:var(--rd)}.sb.yl .sv{color:var(--yl)}.sb.pr .sv{color:var(--pr)}

/* MACRO GRID */
.mg{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
.mb{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:10px 4px;text-align:center}
.mb .v{font-size:1.3em;font-weight:800;font-family:'JetBrains Mono',monospace}
.mb .l{font-size:.58em;color:var(--t3);text-transform:uppercase;margin-top:1px}
.mb.kc .v{color:#fca5a5}.mb.pr .v{color:#93c5fd}.mb.ca .v{color:#fde047}.mb.fa .v{color:#c4b5fd}
@media(max-width:500px){.mg{grid-template-columns:repeat(2,1fr)}}

/* BADGES */
.badge{display:inline-block;padding:2px 8px;border-radius:12px;font-size:.68em;font-weight:700;font-family:'JetBrains Mono',monospace}
.badge.std{background:var(--bg4);color:var(--t2)}.badge.ref{background:var(--gr-g);color:var(--gr)}.badge.psm{background:var(--rd-g);color:var(--rd)}.badge.org{background:var(--pr-g);color:var(--pr)}

/* PROGRESS RING */
.pring{position:relative;width:160px;height:160px;margin:0 auto}
.pring svg{transform:rotate(-90deg);filter:drop-shadow(0 0 10px rgba(255,107,43,.3))}
.pring circle{fill:none;stroke-width:10;stroke-linecap:round}
.pring .trk{stroke:var(--bg4)}.pring .fil{stroke:url(#og);transition:stroke-dashoffset .8s ease}
.pctr{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.pctr .kg{font-size:2em;font-weight:800;font-family:'JetBrains Mono',monospace}
.pctr .lb{font-size:.75em;color:var(--t3)}
.pctr .tgt{margin-top:3px;padding:2px 8px;background:var(--or);border-radius:10px;font-size:.6em;font-weight:700}

/* WEEK SELECTOR */
.wsel{display:flex;gap:6px;margin-bottom:12px}
.wsel .ws{flex:1;padding:8px;background:var(--bg4);border:2px solid var(--brd);border-radius:var(--rad3);color:var(--t2);font-weight:700;font-size:.8em;cursor:pointer;transition:.2s;text-align:center;font-family:'Outfit',sans-serif}
.wsel .ws:hover{border-color:var(--or)}.wsel .ws.on{background:var(--or);color:#fff;border-color:var(--or)}

/* TABS / DAY SELECTOR */
.tabs{display:flex;gap:5px;margin-bottom:12px;flex-wrap:wrap}
.tab{padding:8px 14px;background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad3);color:var(--t2);font-weight:600;font-size:.82em;cursor:pointer;transition:.2s;font-family:'Outfit',sans-serif}
.tab:hover{border-color:var(--or)}.tab.on{background:var(--or);color:#fff;border-color:var(--or)}
.tab.ref{border-color:var(--gr)}.tab.ref.on{background:var(--gr);color:#000}
.tab.psm{border-color:var(--rd)}.tab.psm.on{background:var(--rd)}
.tab.org{border-color:var(--pr)}.tab.org.on{background:var(--pr)}

/* MEAL CARDS */
.mc{background:var(--bg4);border:1px solid var(--brd);border-left:4px solid var(--or);border-radius:var(--rad2);padding:12px;margin-bottom:8px}
.mc.ref{border-left-color:var(--gr)}.mc.psm{border-left-color:var(--rd)}.mc.org{border-left-color:var(--pr)}
.mc .mt{font-size:.72em;color:var(--or2);font-weight:700;font-family:'JetBrains Mono',monospace;margin-bottom:2px}
.mc .mn{font-weight:700;font-size:.92em;margin-bottom:5px}
.mc .mm{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:6px}
.mc .mi{font-size:.8em;color:var(--t2);line-height:1.7}
.mc .mi strong{color:var(--t1)}
.mbdg{display:inline-block;padding:1px 7px;border-radius:10px;font-size:.68em;font-weight:600;font-family:'JetBrains Mono',monospace}
.mbdg.kc{background:rgba(239,68,68,.12);color:#fca5a5}.mbdg.bp{background:rgba(59,130,246,.12);color:#93c5fd}
.mbdg.wg{background:rgba(234,179,8,.12);color:#fde047}.mbdg.tl{background:rgba(168,85,247,.12);color:#c4b5fd}

/* MACRO SUMMARY BAR */
.msbar{background:linear-gradient(135deg,var(--or),var(--or2));border-radius:var(--rad2);padding:12px;margin-top:12px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px;text-align:center}
.msbar .i .l{font-size:.58em;opacity:.85;text-transform:uppercase}.msbar .i .v{font-size:1.2em;font-weight:800;font-family:'JetBrains Mono',monospace}
@media(max-width:500px){.msbar{grid-template-columns:repeat(2,1fr)}}

/* SHOPPING */
.scat{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:12px;margin-bottom:8px}
.scat .sh{display:flex;align-items:center;gap:8px;font-weight:700;color:var(--or);cursor:pointer;margin-bottom:8px;font-size:.92em}
.scat .sh .arr{margin-left:auto;transition:.2s}.scat .sh.col .arr{transform:rotate(-90deg)}
.sitems{display:block}.sitems.hid{display:none}
.si{display:grid;grid-template-columns:20px 1fr auto auto;gap:8px;padding:6px 0;border-bottom:1px solid var(--brd);font-size:.82em;align-items:center}
.si:last-child{border-bottom:none}
.si.chk{opacity:.3}.si.chk .sn{text-decoration:line-through}
.schk{width:16px;height:16px;border:2px solid var(--brd);border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
.schk:hover{border-color:var(--or)}.schk.on{background:var(--gr);border-color:var(--gr)}
.schk.on::after{content:'âœ“';color:#fff;font-size:.6em;font-weight:700}
.sq{color:var(--gr);font-weight:600;text-align:right;font-size:.82em}
.sp{color:var(--t3);font-family:'JetBrains Mono',monospace;min-width:40px;text-align:right;font-size:.82em}
.stot{background:linear-gradient(135deg,var(--or),var(--or2));border-radius:var(--rad2);padding:12px 16px;display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-weight:700}
.stot .v{font-size:1.4em;font-weight:800;font-family:'JetBrains Mono',monospace}

/* SUPP PILLS */
.spblk{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:12px;margin-bottom:8px}
.spblk .hd{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.spblk .tm{background:var(--or-g);padding:2px 8px;border-radius:5px;font-family:'JetBrains Mono',monospace;font-size:.78em;color:var(--or);font-weight:700}
.spblk .lb{color:var(--t2);font-size:.85em}
.pills{display:flex;flex-wrap:wrap;gap:5px}
.pill{padding:4px 10px;background:var(--bg2);border:1px solid var(--brd);border-radius:16px;font-size:.75em;cursor:pointer;transition:.2s}
.pill:hover{border-color:var(--or)}.pill.tk{background:var(--gr-g);border-color:var(--gr);color:var(--gr)}

/* WATER */
.wbot{position:relative;width:100px;height:240px;background:var(--bg4);border:3px solid var(--cy);border-radius:8px 8px 24px 24px;overflow:hidden;margin:0 auto 14px}
.wbot::before{content:'';position:absolute;top:-12px;left:24px;width:50px;height:16px;background:var(--bg4);border:3px solid var(--cy);border-bottom:none;border-radius:4px 4px 0 0}
.wlvl{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(180deg,#22d3ee,#0891b2);transition:.5s}
.wbtns{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-top:10px}
.wbtn{padding:6px 14px;background:var(--bg4);border:2px solid var(--cy);border-radius:18px;color:var(--cy);font-weight:600;cursor:pointer;transition:.2s;font-size:.82em;font-family:'Outfit',sans-serif}
.wbtn:hover{background:var(--cy);color:var(--bg)}
.wbtn.min{border-color:var(--rd);color:var(--rd)}.wbtn.min:hover{background:var(--rd);color:#fff}

/* CHART */
.chrt{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:12px;height:220px}

/* HISTORY */
.hi{display:flex;align-items:center;padding:7px 0;border-bottom:1px solid var(--brd);font-size:.85em}
.hi:last-child{border-bottom:none}
.hi .dt{flex:1;color:var(--t2)}.hi .wt{font-family:'JetBrains Mono',monospace;font-weight:700;color:var(--or);margin-right:8px}
.hi .ch{font-family:'JetBrains Mono',monospace;font-size:.8em;min-width:50px;text-align:right;margin-right:5px}
.hi .ch.dn{color:var(--gr)}.hi .ch.up{color:var(--rd)}
.hi .del{background:none;border:none;color:var(--t3);cursor:pointer;opacity:0;transition:.2s;font-size:.9em}.hi:hover .del{opacity:1}

/* ALERTS */
.al{padding:10px 12px;border-radius:var(--rad2);margin:8px 0;font-size:.85em}
.al.info{background:var(--bl-g);border-left:4px solid var(--bl)}
.al.ok{background:var(--gr-g);border-left:4px solid var(--gr)}
.al.warn{background:var(--yl-g);border-left:4px solid var(--yl)}
.al.err{background:var(--rd-g);border-left:4px solid var(--rd)}
.al.cyn{background:var(--cy-g);border-left:4px solid var(--cy)}

/* BUTTONS */
.btn{padding:8px 16px;background:var(--or);border:none;border-radius:var(--rad3);color:#fff;font-family:'Outfit',sans-serif;font-weight:600;cursor:pointer;transition:.2s;font-size:.85em}
.btn:hover{filter:brightness(1.15)}.btn:active{transform:scale(.97)}
.btn.out{background:transparent;border:1px solid var(--brd);color:var(--t2)}.btn.out:hover{border-color:var(--or);color:var(--t1)}
.btn.sm{padding:5px 10px;font-size:.78em}.btn.gr{background:var(--gr)}.btn.rd{background:var(--rd)}.btn.cy{background:var(--cy);color:var(--bg)}

/* INPUTS */
.ig{margin-bottom:10px}.ig label{display:block;margin-bottom:3px;color:var(--t3);font-size:.78em;font-weight:600}
.ig input,.ig select{width:100%;padding:8px;background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad3);color:var(--t1);font-family:'JetBrains Mono',monospace;font-size:.85em}
.ig input:focus,.ig select:focus{outline:none;border-color:var(--or)}
.fr{display:flex;gap:8px;align-items:flex-end;flex-wrap:wrap}.fr .ig{flex:1;min-width:100px;margin-bottom:0}

/* TOAST */
.toast{position:fixed;bottom:16px;right:16px;padding:8px 14px;background:var(--bg3);border:1px solid var(--brd);border-radius:var(--rad2);box-shadow:0 4px 16px rgba(0,0,0,.5);display:flex;align-items:center;gap:6px;transform:translateY(80px);opacity:0;transition:.3s;z-index:200;font-size:.85em}
.toast.on{transform:translateY(0);opacity:1}.toast.ok{border-left:4px solid var(--gr)}.toast.er{border-left:4px solid var(--rd)}

/* TIMER */
.tdisp{font-family:'JetBrains Mono',monospace;font-size:4em;font-weight:700;color:var(--or);text-shadow:0 0 25px rgba(255,107,43,.35);text-align:center;margin:16px 0}
.tpreset{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-top:14px}
.tpb{padding:6px 12px;background:var(--bg4);border:1px solid var(--brd);border-radius:16px;color:var(--t2);font-size:.78em;cursor:pointer;transition:.2s;font-family:'Outfit',sans-serif}
.tpb:hover{border-color:var(--or);color:var(--t1)}

/* QUICK ACTIONS */
.qa{display:flex;align-items:center;gap:8px;padding:9px 10px;background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);margin-bottom:5px;cursor:pointer;transition:.2s}
.qa:hover{background:var(--bg5);transform:translateX(2px);border-color:var(--brd2)}
.qa .i{font-size:1.1em}.qa .t{flex:1}.qa .tt{font-weight:600;font-size:.88em}.qa .ds{font-size:.68em;color:var(--t3)}.qa .ar{color:var(--t3)}

/* BLOOD RESULTS TABLE */
.brt{width:100%;border-collapse:collapse;font-size:.8em;margin:6px 0}
.brt th,.brt td{padding:7px 6px;text-align:left;border-bottom:1px solid var(--brd)}
.brt th{color:var(--or);font-weight:700;background:var(--bg4);font-size:.85em}
.brt td{color:var(--t2)}
.brt .ok-val{color:var(--gr)}.brt .warn-val{color:var(--yl)}.brt .bad-val{color:var(--rd)}

/* MEAL PREP */
.mp-day{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:12px;margin-bottom:8px}
.mp-day .mp-h{font-weight:700;color:var(--or);font-size:.9em;margin-bottom:6px}
.mp-day .mp-i{font-size:.82em;color:var(--t2);padding:3px 0;border-bottom:1px solid var(--brd)}
.mp-day .mp-i:last-child{border-bottom:none}

/* TABLE generic */
table.gen{width:100%;border-collapse:collapse;font-size:.8em;margin:6px 0}
table.gen th,table.gen td{padding:7px 6px;text-align:left;border-bottom:1px solid var(--brd)}
table.gen th{color:var(--or);font-weight:700;background:var(--bg4)}
table.gen td{color:var(--t2)}


/* MEAL CHECKBOX */
.mchk-row{display:flex;align-items:center;gap:8px;margin-top:8px;padding-top:6px;border-top:1px solid var(--brd)}
.mchk-btn{padding:4px 12px;border-radius:16px;font-size:.75em;font-weight:600;cursor:pointer;transition:.2s;border:1px solid var(--brd);background:var(--bg3);color:var(--t2);font-family:'Outfit',sans-serif}
.mchk-btn:hover{border-color:var(--gr);color:var(--gr)}
.mchk-btn.done{background:var(--gr-g);border-color:var(--gr);color:var(--gr)}
.mchk-lbl{font-size:.72em;color:var(--t3)}

/* COMPLIANCE BAR */
.cbar{display:flex;gap:3px;align-items:flex-end;height:50px;margin-top:10px}
.cbar-d{flex:1;border-radius:3px 3px 0 0;transition:.3s;min-width:0;position:relative}
.cbar-d .cbar-v{position:absolute;top:-14px;left:50%;transform:translateX(-50%);font-size:.55em;color:var(--t3);font-family:'JetBrains Mono',monospace;white-space:nowrap}
.cbar-lbl{display:flex;gap:3px;margin-top:2px}.cbar-lbl span{flex:1;text-align:center;font-size:.55em;color:var(--t3)}

/* SCALE TOGGLE */
.scale-wrap{display:flex;gap:5px;align-items:center;margin-top:6px}
.scale-btn{padding:3px 10px;border-radius:12px;font-size:.72em;font-weight:700;cursor:pointer;transition:.2s;border:1px solid var(--brd);background:var(--bg3);color:var(--t2);font-family:'JetBrains Mono',monospace}
.scale-btn:hover{border-color:var(--yl)}
.scale-btn.on{background:var(--yl-g);border-color:var(--yl);color:var(--yl)}

/* AUTO WEEK INDICATOR */
.aw-bar{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad3);padding:8px 12px;margin-bottom:10px;display:flex;align-items:center;gap:8px;font-size:.82em}
.aw-bar .aw-wk{font-weight:800;color:var(--or);font-family:'JetBrains Mono',monospace}
.aw-bar .aw-day{color:var(--t2)}
.aw-set{font-size:.72em;color:var(--or);cursor:pointer;margin-left:auto;text-decoration:underline}

/* NOTIF BANNER */
.notif-bar{background:var(--yl-g);border:1px solid rgba(251,191,36,.3);border-radius:var(--rad3);padding:10px 12px;margin-bottom:10px;display:flex;align-items:center;gap:8px;font-size:.82em}
.notif-bar button{padding:5px 12px;border-radius:16px;border:none;font-weight:600;cursor:pointer;font-size:.8em;font-family:'Outfit',sans-serif}
.notif-bar .nb-yes{background:var(--or);color:#fff}.notif-bar .nb-no{background:var(--bg4);color:var(--t2)}

/* PWA install */
.pwa-bar{background:var(--or-g);border:1px solid var(--brd2);border-radius:var(--rad3);padding:10px 12px;margin-bottom:10px;display:flex;align-items:center;gap:8px;font-size:.82em;display:none}
.pwa-bar button{padding:5px 12px;border-radius:16px;border:none;background:var(--or);color:#fff;font-weight:600;cursor:pointer;font-size:.8em}

/* OFFLINE BAR */
.offline-bar{position:fixed;top:56px;left:0;right:0;background:var(--rd);color:#fff;text-align:center;padding:6px;font-size:.78em;font-weight:700;z-index:97;transform:translateY(-100%);transition:.3s}
.offline-bar.on{transform:translateY(0)}

/* SCANNER */
#scanReader{width:100%;max-width:400px;margin:0 auto;border-radius:var(--rad2);overflow:hidden}
#scanReader video{border-radius:var(--rad2)}
.scan-result{background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad2);padding:14px;margin-top:12px}
.scan-result .sr-name{font-weight:700;font-size:1.05em;color:var(--or);margin-bottom:8px}
.scan-result .sr-brand{font-size:.82em;color:var(--t2);margin-bottom:8px}
.scan-macro{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-top:8px}
.scan-macro .sm{background:var(--bg3);border-radius:var(--rad3);padding:8px 4px;text-align:center}
.scan-macro .sm .v{font-size:1.2em;font-weight:800;font-family:'JetBrains Mono',monospace;color:var(--or)}
.scan-macro .sm .l{font-size:.6em;color:var(--t3);text-transform:uppercase}
.scan-hist{margin-top:12px;max-height:300px;overflow-y:auto}
.scan-hi{display:flex;align-items:center;gap:8px;padding:8px;background:var(--bg4);border:1px solid var(--brd);border-radius:var(--rad3);margin-bottom:4px;font-size:.82em;cursor:pointer;transition:.2s}
.scan-hi:hover{border-color:var(--or)}
.scan-hi .sh-n{flex:1;font-weight:600}.scan-hi .sh-k{color:var(--or);font-family:'JetBrains Mono',monospace}

/* PHOTO DIARY */
.photo-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.photo-card{position:relative;border-radius:var(--rad3);overflow:hidden;aspect-ratio:1;background:var(--bg4);border:1px solid var(--brd)}
.photo-card img{width:100%;height:100%;object-fit:cover}
.photo-card .pc-info{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,.8));padding:4px 6px;font-size:.6em;color:#fff}
.photo-card .pc-del{position:absolute;top:4px;right:4px;background:var(--rd);border:none;color:#fff;width:20px;height:20px;border-radius:50%;font-size:.65em;cursor:pointer;opacity:0;transition:.2s}
.photo-card:hover .pc-del{opacity:1}
#photoCapture{display:none}

/* FULLSCREEN TIMER */
.fs-timer{position:fixed;inset:0;background:var(--bg);z-index:200;display:none;flex-direction:column;align-items:center;justify-content:center}
.fs-timer.on{display:flex}
.fs-timer .fs-time{font-family:'JetBrains Mono',monospace;font-size:min(25vw,120px);font-weight:800;color:var(--or);text-shadow:0 0 60px rgba(255,107,43,.4)}
.fs-timer .fs-lbl{font-size:1.2em;color:var(--t2);margin-bottom:20px}
.fs-timer .fs-btns{display:flex;gap:12px}

/* THEME TOGGLE */
body.light{--bg:#f5f5f5;--bg2:#fff;--bg3:#f0f0f0;--bg4:#e8e8e8;--bg5:#ddd;--t1:#111;--t2:#555;--t3:#888;--brd:rgba(0,0,0,.1);--brd2:rgba(255,107,43,.3)}
.theme-btn{width:36px;height:36px;border-radius:var(--rad3);border:1px solid var(--brd);background:var(--bg3);color:var(--t2);font-size:1em;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;flex-shrink:0}
.theme-btn:active{transform:scale(.9)}

/* SHAKE HINT */
.shake-hint{font-size:.7em;color:var(--t3);text-align:center;margin-top:6px;opacity:.6}

@media(max-width:600px){
main{padding:64px 8px 28px}.hbadge{display:none}header{padding:0 8px;gap:6px}
.photo-grid{grid-template-columns:repeat(2,1fr)}
.scan-macro{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>
<svg width="0" height="0"><defs><linearGradient id="og" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#ff6b2b"/><stop offset="100%" stop-color="#ff8f5e"/></linearGradient></defs></svg>
<div class="offline-bar" id="offBar">ğŸ“¡ Brak internetu â€” tryb offline</div>
<div class="toast" id="toast"><span id="tIco"></span><span id="tMsg"></span></div>
<div class="overlay" id="ov" onclick="navC()"></div>
<header>
<button class="hbtn" id="mbtn" onclick="navT()">â˜°</button>
<div class="htitle"><h1>DIET MASTER V7</h1><span>~303 zÅ‚/tyg â€¢ T<span id="hWk">1</span></span></div>
<div class="hbadge">ğŸ’§ <b id="hw">0</b>L</div>
<div class="hbadge">âš–ï¸ <b id="hwt">100.0</b>kg</div>
<button class="theme-btn" id="themeBtn" onclick="toggleTheme()">ğŸŒ™</button>
</header>
<nav id="nav">
<div class="nlbl">GÅ‚Ã³wne</div>
<button class="nbtn on" data-s="dash"><span class="ni"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span>Dashboard</button>
<button class="nbtn" data-s="plan"><span class="ni"><svg viewBox="0 0 24 24"><path d="M3 6h18M3 12h18M3 18h12"/><circle cx="20" cy="18" r="2"/></svg></span>JadÅ‚ospis</button>
<button class="nbtn" data-s="shop"><span class="ni"><svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg></span>Zakupy</button>
<button class="nbtn" data-s="waga"><span class="ni"><svg viewBox="0 0 24 24"><path d="M12 3a4 4 0 014 4H8a4 4 0 014-4z"/><path d="M5 7h14l-1 14H6L5 7z"/></svg></span>Waga</button>
<div class="nlbl">NarzÄ™dzia</div>
<button class="nbtn" data-s="woda"><span class="ni"><svg viewBox="0 0 24 24"><path d="M12 2L5 10c-1.5 2-2 4-2 6a9 9 0 0018 0c0-2-.5-4-2-6L12 2z"/></svg></span>Nawodnienie</button>
<button class="nbtn" data-s="supp"><span class="ni"><svg viewBox="0 0 24 24"><rect x="6" y="2" width="12" height="20" rx="4"/><line x1="6" y1="10" x2="18" y2="10"/></svg></span>Suplementy</button>
<button class="nbtn" data-s="psmf"><span class="ni"><svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10"/></svg></span>ProtokÃ³Å‚ PSMF</button>
<button class="nbtn" data-s="prep"><span class="ni"><svg viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12h20C22 6.5 17.5 2 12 2z"/><path d="M2 14h20v2a4 4 0 01-4 4H6a4 4 0 01-4-4v-2z"/></svg></span>Meal Prep</button>
<button class="nbtn" data-s="timer"><span class="ni"><svg viewBox="0 0 24 24"><circle cx="12" cy="13" r="8"/><path d="M12 9v4l2 2"/><path d="M9 2h6"/><path d="M12 2v2"/></svg></span>Timer</button>
<button class="nbtn" data-s="scan"><span class="ni"><svg viewBox="0 0 24 24"><path d="M3 7V5a2 2 0 012-2h2M17 3h2a2 2 0 012 2v2M21 17v2a2 2 0 01-2 2h-2M7 21H5a2 2 0 01-2-2v-2"/><line x1="7" y1="8" x2="7" y2="16"/><line x1="11" y1="8" x2="11" y2="16"/><line x1="15" y1="8" x2="15" y2="16"/></svg></span>Skaner EAN</button>
<button class="nbtn" data-s="photos"><span class="ni"><svg viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M8 5l1-2h6l1 2"/></svg></span>Foto PosiÅ‚kÃ³w</button>
<div class="nlbl">Dane</div>
<button class="nbtn" data-s="blood"><span class="ni"><svg viewBox="0 0 24 24"><path d="M12 2L7 10c-1 1.5-2 3.5-2 5.5A7 7 0 0019 15.5c0-2-1-4-2-5.5L12 2z"/><path d="M9 15a3 3 0 003 3"/></svg></span>Wyniki Krwi</button>
<button class="nbtn" data-s="zabka"><span class="ni"><svg viewBox="0 0 24 24"><path d="M3 3h18v18H3z"/><path d="M3 9h18M9 3v18"/></svg></span>Plan B â€” Å»abka</button>
<button class="nbtn" data-s="dataio"><span class="ni"><svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></span>Backup / Eksport</button>
</nav>
<main>

<!-- DASHBOARD -->
<section id="dash" class="sec on">
<div id="notifBar" class="notif-bar" style="display:none">
<span>ğŸ””</span><span>WÅ‚Ä…cz powiadomienia (elektrolity, posiÅ‚ki, supl.)</span>
<button class="nb-yes" onclick="notifReq()">WÅ‚Ä…cz</button><button class="nb-no" onclick="notifDismiss()">Nie</button>
</div>
<div id="pwaBar" class="pwa-bar">
<span>ğŸ“±</span><span>Zainstaluj jako aplikacjÄ™ na telefonie</span>
<button onclick="pwaInstall()">Instaluj</button><button class="nb-no" onclick="this.parentElement.style.display='none'">Ã—</button>
</div>
<div class="aw-bar" id="awBar">
<span class="aw-wk" id="awWk">T1</span>
<span class="aw-day" id="awDay">PON â€¢ DzieÅ„ 1</span>
<span class="aw-set" id="awSet" onclick="awConfig()">âš™ï¸ Ustaw start</span>
</div>
<div class="g2">
<div class="c"><div class="ch"><div class="ico">ğŸ¯</div><h2>PostÄ™p</h2></div>
<div style="text-align:center">
<div class="pring"><svg width="160" height="160"><circle class="trk" cx="80" cy="80" r="70"/><circle class="fil" cx="80" cy="80" r="70" stroke-dasharray="440" stroke-dashoffset="440" id="pRing"/></svg><div class="pctr"><div class="kg" id="cWt">100.0</div><div class="lb">kg</div><div class="tgt">CEL: 82 KG</div></div></div>
<div class="g2" style="margin-top:12px"><div class="sb gr"><div class="sv" id="lostK">0.0</div><div class="sl">kg stracone</div></div><div class="sb"><div class="sv" id="leftK">18.0</div><div class="sl">kg do celu</div></div></div>
</div></div>
<div class="c"><div class="ch"><div class="ico">ğŸ“ˆ</div><h2>Dzisiejsze makra</h2><span class="badge std" id="dayBdg">STANDARD</span></div>
<div class="mg"><div class="mb kc"><div class="v" id="dKc">â€”</div><div class="l">Kalorie</div></div><div class="mb pr"><div class="v" id="dP">â€”</div><div class="l">BiaÅ‚ko</div></div><div class="mb ca"><div class="v" id="dW">â€”</div><div class="l">WÄ™gle</div></div><div class="mb fa"><div class="v" id="dT">â€”</div><div class="l">TÅ‚uszcz</div></div></div>
<div class="g2" style="margin-top:12px"><div class="sb cy"><div class="sv" id="dWat">0.0</div><div class="sl">ğŸ’§ woda (L)</div></div><div class="sb bl"><div class="sv" id="dStr">0</div><div class="sl">ğŸ½ï¸ posiÅ‚ki dziÅ›</div></div></div>
</div></div>
<div class="g2" style="margin-top:12px">
<div class="c"><div class="ch"><div class="ico">ğŸ“‹</div><h2>Plan na dziÅ›</h2><span style="color:var(--t3);font-size:.78em" id="todD"></span></div><div id="todM"></div></div>
<div class="c"><div class="ch"><div class="ico">âš¡</div><h2>Szybkie akcje</h2></div>
<div class="qa" onclick="go('woda')"><span class="i">ğŸ’§</span><div class="t"><div class="tt">Dodaj wodÄ™</div><div class="ds">Cel: 5L+</div></div><span class="ar">â†’</span></div>
<div class="qa" onclick="go('waga')"><span class="i">âš–ï¸</span><div class="t"><div class="tt">Zapisz wagÄ™</div><div class="ds">Codziennie rano</div></div><span class="ar">â†’</span></div>
<div class="qa" onclick="go('prep')"><span class="i">ğŸ³</span><div class="t"><div class="tt">Meal Prep</div><div class="ds">Co gotowaÄ‡ dziÅ›</div></div><span class="ar">â†’</span></div>
<div class="qa" onclick="go('supp')"><span class="i">ğŸ’Š</span><div class="t"><div class="tt">Suplementy</div><div class="ds">Odznacz wziÄ™te</div></div><span class="ar">â†’</span></div>
</div></div>
<div class="c" style="grid-column:1/-1"><div class="ch"><div class="ico">âœ…</div><h2>Compliance</h2><span style="font-size:.78em;color:var(--t3)" id="compPct">â€”</span></div>
<div class="cbar" id="compBar"></div>
<div class="cbar-lbl" id="compLbl"></div>
</div>
</section>

<!-- JADÅOSPIS -->
<section id="plan" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ½ï¸</div><h2>JadÅ‚ospis V7</h2></div>
<div class="al info"><strong>ğŸ’¡ 4-tygodniowa rotacja.</strong> Wybierz tydzieÅ„ â†’ dzieÅ„ â†’ peÅ‚ny plan z przepisami.</div>
<div class="scale-wrap"><span style="font-size:.78em;color:var(--t3)">ğŸ³ Porcja:</span><button class="scale-btn" id="sc1" onclick="setScale(1)">Ã—1</button><button class="scale-btn" id="sc2" onclick="setScale(2)">Ã—2</button><button class="scale-btn" id="sc3" onclick="setScale(3)">Ã—3</button></div>
<div class="al ok"><strong>ğŸŒ± Chia 10g/dzieÅ„</strong> w shake = +5g bÅ‚onnika. <strong>Glicyna 5g</strong> w MSM shot 21:00 = stawy + sen. <strong>Omega-3 4 kaps</strong> = ~2g EPA+DHA â†’ triglicerydy w dÃ³Å‚.</div>
<div class="wsel" id="weekSel"></div>
<div class="tabs" id="dayTabs"></div>
<div id="dayC"></div>
</div></section>

<!-- ZAKUPY -->
<section id="shop" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ›’</div><h2>Lista ZakupÃ³w â€” <span id="shopWkLbl">TydzieÅ„ 1</span></h2><button class="btn sm out" onclick="shopRst()">ğŸ”„ Reset</button></div>
<div class="wsel" id="shopWeekSel"></div>
<div id="shopC"></div>
<div class="stot"><span>RAZEM:</span><span class="v" id="shopTot">â€” zÅ‚</span></div>
<div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
<button class="btn out" onclick="findStore('Biedronka')">ğŸ“ NajbliÅ¼sza Biedronka</button>
<button class="btn out" onclick="findStore('Lidl')">ğŸ“ NajbliÅ¼szy Lidl</button>
</div>
<div class="shopgen">
<h3>ğŸ› ï¸ Generator listy â€” wybierz dni</h3>
<div class="al info" style="margin:0 0 10px"><strong>Zaznacz dni</strong> z dowolnych tygodni â†’ wygenerujÄ™ listÄ™ skÅ‚adnikÃ³w.</div>
<div style="margin-bottom:8px">
<div style="display:flex;gap:4px;margin-bottom:6px" id="sgWeekBtns"></div>
<div class="sg-days" id="sgDays"></div>
</div>
<div style="display:flex;gap:8px;flex-wrap:wrap">
<button class="btn" onclick="sgGenerate()">ğŸ“‹ Generuj listÄ™</button>
<button class="btn out" onclick="sgClear()">ğŸ”„ WyczyÅ›Ä‡</button>
<button class="btn gr" onclick="sgShare()">ğŸ“¤ UdostÄ™pnij</button>
</div>
<div class="sg-result" id="sgResult"></div>
</div>
</div></section>

<!-- WAGA -->
<section id="waga" class="sec">
<div class="c"><div class="ch"><div class="ico">âš–ï¸</div><h2>Tracker Wagi</h2></div>
<div class="fr" style="margin-bottom:14px"><div class="ig"><label>Waga (kg)</label><input type="number" id="wIn" step="0.1" min="50" max="200" placeholder="np. 98.5"></div><div class="ig"><label>Data</label><input type="date" id="dIn"></div><button class="btn" onclick="addW()" style="height:38px">ğŸ’¾</button></div>
<div class="chrt"><canvas id="wChart"></canvas></div>
<div class="g4" style="margin-top:12px"><div class="sb gr"><div class="sv" id="sStr">-</div><div class="sl">Start</div></div><div class="sb yl"><div class="sv" id="sLow">-</div><div class="sl">Min</div></div><div class="sb bl"><div class="sv" id="sAvg">-</div><div class="sl">kg/tyg</div></div><div class="sb cy"><div class="sv" id="sDays">-</div><div class="sl">Dni do celu</div></div></div>
<div style="margin-top:14px;max-height:240px;overflow-y:auto" id="wHist"></div>
</div></section>

<!-- WODA -->
<section id="woda" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ’§</div><h2>Nawodnienie</h2><button class="btn sm out" onclick="watRst()">ğŸ”„</button></div>
<div style="text-align:center;padding:14px 0">
<div class="wbot"><div class="wlvl" id="wLvl" style="height:0%"></div></div>
<div style="font-size:2em;font-weight:800;color:var(--cy);font-family:'JetBrains Mono',monospace"><span id="wCur">0</span> ml</div>
<div style="color:var(--t3);margin:3px 0 14px">Cel: <strong>5000 ml</strong> (<span id="wPct">0</span>%)</div>
<div class="wbtns"><button class="wbtn" onclick="watA(250)">+250</button><button class="wbtn" onclick="watA(500)">+500</button><button class="wbtn" onclick="watA(750)">+750</button><button class="wbtn" onclick="watA(1000)">+1L</button><button class="wbtn min" onclick="watA(-250)">-250</button></div>
<div class="shake-hint" id="shakeHint">ğŸ“³ PotrzÄ…Å›nij telefonem â†’ +250ml</div>
</div>
<div class="al cyn" style="margin-top:14px"><strong>ğŸ’§ Harmonogram:</strong><br>â€¢ 04:00 â€” Z shake (200ml)<br>â€¢ 06:00-15:00 â€” Min 3L w pracy (yerba wliczona, ostatnia o 13:00)<br>â€¢ 10:00 â€” Elektrolity 500ml (SHAKER!)<br>â€¢ 16:00 â€” Przed/w trakcie posiÅ‚ku<br>â€¢ 21:00 â€” MSM + Glicyna 5g shot 300ml<br>â€¢ Cel dzienny: 5L+<br>â€¢ ğŸ’¡ Banan (80g) codziennie w shake = potas na uzupeÅ‚nienie elektrolitÃ³w</div>
</div></section>

<!-- SUPLEMENTY -->
<section id="supp" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ’Š</div><h2>Suplementacja</h2><button class="btn sm out" onclick="suppRst()">ğŸ”„</button></div>
<div class="al warn"><strong>âš ï¸ 23 lata:</strong> Bez DHEA, Fadogia, TESTOXX. Naturalny testo na szczycie!</div>
<div id="suppC"></div>
<div class="al info" style="margin-top:12px"><strong>ğŸ’¡ Cykluj Ginseng:</strong> 4 tyg ON / 1 tyg OFF.</div>
</div></section>

<!-- PSMF -->
<section id="psmf" class="sec">
<div class="c"><div class="ch"><div class="ico">âš¡</div><h2>PSMF â€” Sobota</h2></div>
<div class="al err"><strong>âš¡ TRUE PSMF:</strong> ~1160 kcal | ~225g biaÅ‚ka | ~7g tÅ‚uszczu</div>
<table class="gen">
<tr><th>Czas</th><th>Co</th><th>Kcal</th><th>B</th></tr>
<tr><td style="color:var(--or)">04:00</td><td>Shake PSMF (400g twarÃ³g Â· woda Â· 6 biaÅ‚ek Â· 10g chia)</td><td>484</td><td>92g</td></tr>
<tr><td style="color:var(--or)">10:00</td><td>Elektrolity SHOT + PSMF Survival Drink</td><td>5</td><td>0g</td></tr>
<tr><td style="color:var(--or)">16:00</td><td>400g pierÅ› GOTOWANA + 300g ogÃ³rek + 100g saÅ‚ata</td><td>507</td><td>90g</td></tr>
<tr><td style="color:var(--or)">19:00</td><td>150g twarÃ³g + 4 biaÅ‚ka gotowane [opcjonalny]</td><td>193</td><td>40g</td></tr>
<tr style="font-weight:700"><td></td><td>SUMA</td><td style="color:var(--rd)">1160</td><td style="color:var(--bl)">225g</td></tr>
</table>
<div class="al warn" style="margin-top:12px"><strong>âš ï¸ KIEDY PRZERWAÄ†:</strong><br>â€¢ Zawroty gÅ‚owy po elektrolitach â†’ zjedz normalny posiÅ‚ek<br>â€¢ TrzÄ™sienie rÄ…k â†’ dodaj banan<br>â€¢ 3 soboty z rzÄ™du Åºle â†’ lekki dzieÅ„ 1400 kcal</div>
<h3 style="color:var(--or);margin:16px 0 8px;font-size:.95em">ğŸ“‹ Checklist PSMF</h3>
<div id="psmfChk"></div>
</div></section>

<!-- MEAL PREP -->
<section id="prep" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ³</div><h2>Meal Prep â€” <span id="prepWkLbl">TydzieÅ„ 1</span></h2></div>
<div class="wsel" id="prepWeekSel"></div>
<div class="al info"><strong>Strategia:</strong> Gotuj na 2 dni do przodu. Blender wieczorem, rano 5 sek. wstrzÄ…Å›niÄ™cie.</div>
<div id="prepC"></div>
</div></section>

<!-- TIMER -->
<section id="timer" class="sec">
<div class="c"><div class="ch"><div class="ico">â±ï¸</div><h2>Timer</h2></div>
<div style="text-align:center;padding:16px 0">
<div class="tdisp" id="tmDisp">00:00</div>
<div style="color:var(--t3);margin-bottom:14px" id="tmLbl">Wybierz preset</div>
<div style="display:flex;justify-content:center;gap:8px"><button class="btn" id="tmBtn" onclick="tmTog()">â–¶ï¸ Start</button><button class="btn out" onclick="tmRst()">ğŸ”„</button><button class="btn cy" onclick="tmFullscreen()">â›¶ Fullscreen</button></div>
<div class="tpreset"><button class="tpb" onclick="tmSet(1)">1 min</button><button class="tpb" onclick="tmSet(3)">3 min</button><button class="tpb" onclick="tmSet(5)">5 min</button><button class="tpb" onclick="tmSet(8)">8 min jajka</button><button class="tpb" onclick="tmSet(10)">10 min kasza</button><button class="tpb" onclick="tmSet(12)">12 min ryÅ¼</button><button class="tpb" onclick="tmSet(15)">15 min jaglana</button><button class="tpb" onclick="tmSet(20)">20 min kurczak</button><button class="tpb" onclick="tmSet(40)">40 min Å¼oÅ‚Ä…dki</button></div>
</div></div></section>

<!-- SCANNER -->
<section id="scan" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ“·</div><h2>Skaner KodÃ³w EAN</h2></div>
<div class="al info"><strong>ğŸ“¡ Wymaga internetu.</strong> Skanuj kod kreskowy â†’ makra z Open Food Facts.</div>
<div style="text-align:center;margin-bottom:12px">
<button class="btn" id="scanStartBtn" onclick="scanStart()">ğŸ“· Uruchom kamerÄ™</button>
<button class="btn rd" id="scanStopBtn" onclick="scanStop()" style="display:none">â¹ï¸ Zatrzymaj</button>
</div>
<div id="scanReader"></div>
<div id="scanResult"></div>
<div class="ig" style="margin-top:12px"><label>Lub wpisz kod rÄ™cznie:</label>
<div class="fr"><input type="text" id="eanInput" placeholder="np. 5900512345678" inputmode="numeric"><button class="btn sm" onclick="eanLookup(document.getElementById('eanInput').value)">ğŸ”</button></div>
</div>
<h3 style="color:var(--or);margin:16px 0 8px;font-size:.9em">ğŸ“œ Historia skanÃ³w</h3>
<div class="scan-hist" id="scanHist"></div>
</div></section>

<!-- FOTO POSIÅKÃ“W -->
<section id="photos" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ“¸</div><h2>Foto Dziennik</h2><button class="btn sm out" onclick="photoClear()">ğŸ—‘ï¸</button></div>
<div class="al info"><strong>ğŸ“¸ ZrÃ³b zdjÄ™cie posiÅ‚ku</strong> â€” wizualny dziennik. ZdjÄ™cia zapisywane lokalnie w IndexedDB.</div>
<div style="text-align:center;margin-bottom:12px">
<button class="btn" onclick="photoTake()">ğŸ“· ZrÃ³b zdjÄ™cie</button>
<input type="file" id="photoCapture" accept="image/*" capture="environment" onchange="photoProcess(event)">
</div>
<div style="margin-bottom:8px;color:var(--t3);font-size:.82em;text-align:center" id="photoCount">â€”</div>
<div class="photo-grid" id="photoGrid"></div>
</div></section>

<!-- FULLSCREEN TIMER OVERLAY -->
<div class="fs-timer" id="fsTimer">
<div class="fs-lbl" id="fsLbl">Timer</div>
<div class="fs-time" id="fsTime">00:00</div>
<div class="fs-btns">
<button class="btn" id="fsTmBtn" onclick="tmTog();updFsTimer()">â–¶ï¸ Start</button>
<button class="btn out" onclick="tmRst();updFsTimer()">ğŸ”„</button>
<button class="btn rd" onclick="fsClose()">âœ• Zamknij</button>
</div>
</div>

<!-- BLOOD RESULTS -->
<section id="blood" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ©¸</div><h2>Wyniki Krwi â€” 09.09.2025</h2></div>
<div class="al ok"><strong>âœ… OgÃ³lnie dobry stan zdrowia.</strong> Nerki OK dla high-protein. WÄ…troba idealna. Tarczyca OK.</div>
<div class="al warn"><strong>âš ï¸ Triglicerydy: 139 mg/dl</strong> (cel: <100). PodwyÅ¼szone â€” dieta + Omega-3 + redukcja masy powinny obniÅ¼yÄ‡.<br><strong>âš ï¸ HDL: 47 mg/dl</strong> (lepiej >50). AktywnoÅ›Ä‡ fizyczna + Omega-3 podniesie.</div>

<h3 style="color:var(--or);margin:14px 0 6px;font-size:.9em">Morfologia</h3>
<table class="brt">
<tr><th>Badanie</th><th>Wynik</th><th>Norma</th><th>Status</th></tr>
<tr><td>Leukocyty</td><td>6,98 tys/Î¼l</td><td>4,00-10,00</td><td class="ok-val">âœ…</td></tr>
<tr><td>Erytrocyty</td><td>5,29 mln/Î¼l</td><td>4,60-6,50</td><td class="ok-val">âœ…</td></tr>
<tr><td>Hemoglobina</td><td>16,7 g/dl</td><td>13,5-18,0</td><td class="ok-val">âœ…</td></tr>
<tr><td>Hematokryt</td><td>50,7 %</td><td>40,0-52,0</td><td class="ok-val">âœ…</td></tr>
<tr><td>MCV</td><td>95,8 fl</td><td>80,0-98,0</td><td class="ok-val">âœ…</td></tr>
<tr><td>PÅ‚ytki krwi</td><td>232 tys/Î¼l</td><td>150-400</td><td class="ok-val">âœ…</td></tr>
</table>

<h3 style="color:var(--or);margin:14px 0 6px;font-size:.9em">Biochemia</h3>
<table class="brt">
<tr><th>Badanie</th><th>Wynik</th><th>Norma</th><th>Status</th></tr>
<tr><td>Kreatynina</td><td>0,72 mg/dl</td><td>0,70-1,20</td><td class="ok-val">âœ… nerki OK</td></tr>
<tr><td>eGFR</td><td>>60 ml/min</td><td>>60</td><td class="ok-val">âœ…</td></tr>
<tr><td>Glukoza</td><td>87 mg/dl</td><td>70-99</td><td class="ok-val">âœ…</td></tr>
<tr><td>ALT</td><td>21 U/l</td><td>0-50</td><td class="ok-val">âœ… wÄ…troba OK</td></tr>
<tr><td>AST</td><td>21 U/l</td><td>0-50</td><td class="ok-val">âœ…</td></tr>
<tr><td>GGTP</td><td>18 U/l</td><td>0-60</td><td class="ok-val">âœ…</td></tr>
<tr><td>Amylaza</td><td>32 U/l</td><td>28-100</td><td class="ok-val">âœ…</td></tr>
<tr><td>SÃ³d</td><td>143 mmol/l</td><td>136-145</td><td class="ok-val">âœ…</td></tr>
<tr><td>Potas</td><td>3,73 mmol/l</td><td>3,50-5,10</td><td class="ok-val">âœ…</td></tr>
<tr><td>TSH</td><td>1,560 Î¼IU/ml</td><td>0,270-4,200</td><td class="ok-val">âœ… tarczyca OK</td></tr>
<tr><td>Wit. B12</td><td>413 pg/ml</td><td>197-771</td><td class="ok-val">âœ…</td></tr>
<tr><td>PSA</td><td>0,371 ng/ml</td><td>0-1,400</td><td class="ok-val">âœ…</td></tr>
</table>

<h3 style="color:var(--or);margin:14px 0 6px;font-size:.9em">Lipidogram âš ï¸</h3>
<table class="brt">
<tr><th>Badanie</th><th>Wynik</th><th>Zalecane</th><th>Status</th></tr>
<tr><td>Cholesterol</td><td>183 mg/dl</td><td>115-190</td><td class="ok-val">âœ…</td></tr>
<tr><td>HDL</td><td>47 mg/dl</td><td>>50</td><td class="warn-val">âš ï¸ niski</td></tr>
<tr><td>nie-HDL</td><td>136 mg/dl</td><td><130</td><td class="warn-val">âš ï¸</td></tr>
<tr><td>LDL</td><td>111 mg/dl</td><td><115</td><td class="warn-val">âš ï¸ graniczny</td></tr>
<tr><td>Triglicerydy</td><td>139 mg/dl</td><td><100</td><td class="bad-val">âŒ za wysoko</td></tr>
</table>

<div class="al info" style="margin-top:14px"><strong>ğŸ“‹ Co z tym robiÄ‡:</strong><br>
â€¢ Redukcja masy (100â†’82kg) obniÅ¼y TG i LDL<br>
â€¢ Omega-3 (2 kaps/dz) â€” bierzesz, kontynuuj<br>
â€¢ SiÅ‚ownia (start w ciÄ…gu miesiÄ…ca) podniesie HDL<br>
â€¢ Kontrolne badania: po osiÄ…gniÄ™ciu ~90kg (ok. 10 tyg)</div>
</div></section>

<!-- PLAN B Å»ABKA -->
<section id="zabka" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸª</div><h2>Plan B â€” Å»abka / Awaryjny</h2></div>
<div class="al warn"><strong>âš ï¸ UÅ¼yj TYLKO gdy nie moÅ¼esz gotowaÄ‡.</strong> Nie zastÄ™puje normalnego planu.</div>
<h3 style="color:var(--or);margin:14px 0 8px;font-size:.9em">Opcja 1: ~700 kcal | ~80g biaÅ‚ka</h3>
<div class="mc"><div class="mn">PierÅ› z kurczaka gotowana (Å»abka/Freshmarket)</div>
<div class="mi">â€¢ PierÅ› z kurczaka w plastrach (~150g) â€” ~25g B<br>â€¢ TwarÃ³g 0% Pilos 250g â€” ~42g B<br>â€¢ OgÃ³rek/pomidor â€” ~20 kcal<br>Razem: ~500 kcal | ~67g B</div></div>
<h3 style="color:var(--or);margin:14px 0 8px;font-size:.9em">Opcja 2: ~600 kcal | ~70g biaÅ‚ka</h3>
<div class="mc"><div class="mn">Jajka na twardo + twarÃ³g (stacja benzynowa)</div>
<div class="mi">â€¢ 4 jajka gotowane (kup + ugotuj w pracy w czajniku) â€” ~25g B<br>â€¢ TwarÃ³g 0% 250g â€” ~42g B<br>Razem: ~500 kcal | ~67g B</div></div>
<h3 style="color:var(--or);margin:14px 0 8px;font-size:.9em">Opcja 3: Fast track Biedronka</h3>
<div class="mc"><div class="mn">Gotowe danie + twarÃ³g</div>
<div class="mi">â€¢ PierÅ› grillowana z lady (Biedronka deli) ~200g â€” ~44g B<br>â€¢ TwarÃ³g 0% 250g â€” ~42g B<br>â€¢ SaÅ‚ata w torebce â€” ~20 kcal<br>Razem: ~580 kcal | ~86g B</div></div>
<div class="al info" style="margin-top:12px"><strong>Zasada:</strong> Gdy nie moÅ¼esz gotowaÄ‡ â†’ twarÃ³g 0% + najbardziej czyste biaÅ‚ko jakie znajdziesz. Unikaj gotowych sosÃ³w, panierki, fast-foodu.</div>
</div></section>

<!-- BACKUP / EKSPORT -->
<section id="dataio" class="sec">
<div class="c"><div class="ch"><div class="ico">ğŸ’¾</div><h2>Backup & Dane</h2></div>
<div class="al info"><strong>ğŸ“± Twoje dane Å¼yjÄ… w localStorage.</strong> ZrÃ³b backup Å¼eby nie straciÄ‡ przy czyszczeniu przeglÄ…darki.</div>
<div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:14px">
<button class="btn" onclick="dataExport()">ğŸ“¤ Eksportuj JSON</button>
<button class="btn out" onclick="document.getElementById('impFile').click()">ğŸ“¥ Importuj JSON</button>
<input type="file" id="impFile" accept=".json" style="display:none" onchange="dataImport(event)">
<button class="btn rd" onclick="dataClear()">ğŸ—‘ï¸ WyczyÅ›Ä‡ dane</button>
</div>
<div class="al warn"><strong>âš ï¸ Import nadpisze aktualne dane.</strong> ZrÃ³b eksport najpierw.</div>
<div style="margin-top:14px">
<h3 style="color:var(--or);font-size:.9em;margin-bottom:8px">ğŸ“Š UdostÄ™pnij postÄ™p</h3>
<button class="btn gr" onclick="shareProgress()">ğŸ“¤ UdostÄ™pnij postÄ™p</button>
<span style="font-size:.75em;color:var(--t3);margin-left:8px">WyÅ›le podsumowanie przez Share API</span>
</div>
<div style="margin-top:14px">
<h3 style="color:var(--or);font-size:.9em;margin-bottom:8px">ğŸ”’ Magazyn trwaÅ‚y</h3>
<button class="btn cy" onclick="reqPersist()">ProÅ› o trwaÅ‚y storage</button>
<span style="font-size:.75em;color:var(--t3);margin-left:8px" id="persistSt">â€”</span>
</div>
<div style="margin-top:14px">
<h3 style="color:var(--or);font-size:.9em;margin-bottom:8px">ğŸ“± Status PWA</h3>
<div id="pwaStatus" style="font-size:.82em;color:var(--t2)">Åadowanie...</div>
</div>
</div></section>

<!-- AUTO-WEEK CONFIG -->
<div id="awModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:150;display:none;align-items:center;justify-content:center">
<div class="c" style="max-width:340px;margin:20px">
<div class="ch"><div class="ico">ğŸ“…</div><h2>Data startu diety</h2></div>
<div class="ig"><label>Kiedy zaczÄ…Å‚eÅ› dietÄ™?</label><input type="date" id="awDate"></div>
<div style="display:flex;gap:8px;margin-top:10px">
<button class="btn" onclick="awSave()">ğŸ’¾ Zapisz</button>
<button class="btn out" onclick="awClose()">Anuluj</button>
<button class="btn rd" onclick="awClear()">Reset</button>
</div>
<div class="al info" style="margin-top:10px"><strong>Auto-rotacja:</strong> T1â†’T2â†’T3â†’T4â†’T1 co poniedziaÅ‚ek od daty startu.</div>
</div></div>
</main>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 4-WEEK MEAL DATA (from verified calculations)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const WEEKS=[
// â”€â”€â”€ TYDZIEÅƒ 1 â”€â”€â”€
[
{n:'PON',cls:'',bdg:'std',bdgT:'STANDARD A',kcal:2089,b:272,w:167,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + Â½ Å‚yÅ¼. soli himalajskiej + sok Â½ cytryny',recipe:'W shakerze z domu. Wypij w 10 min.'},
{time:'16:00',name:'ğŸ— PierÅ› + RyÅ¼ + BrokuÅ‚y',cls:'',kcal:809,b:99,w:62,t:13,
ing:'400g pierÅ› surowa Â· 65g ryÅ¼ Â· 250g brokuÅ‚y mroÅ¼one Â· 5ml olej',
recipe:'RyÅ¼ 12 min w 250ml wody. PierÅ› w kostkÄ™ 3Ã—3cm, smaÅ¼ 10-12 min na 5ml oleju. BrokuÅ‚y ostatnie 5 min. SÃ³l, pieprz, papryka.'},
{time:'19:00',name:'ğŸ¥š Jajka gotow. + TwarÃ³g + Kasza Gryczana',cls:'',kcal:632,b:76,w:53,t:12,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 250g twarÃ³g Â· 40g kasza gryczana Â· 200g mix warzywny',
recipe:'Kasza 10 min. Jajka gotuj 8 min (twarde). TwarÃ³g z boku. Warzywa mikrofala 4 min.'}
]},
{n:'WTO',cls:'',bdg:'std',bdgT:'STANDARD B',kcal:2028,b:268,w:157,t:28,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + Â½ Å‚yÅ¼. soli + sok Â½ cytryny',recipe:'Shaker z domu.'},
{time:'16:00',name:'ğŸ— PierÅ› + Makaron + Warzywa',cls:'',kcal:782,b:99,w:55,t:13,
ing:'400g pierÅ› Â· 60g makaron peÅ‚noziarnisty Â· 200g mix warzywny Â· 5ml olej',
recipe:'Makaron al dente 8-10 min. Kurczak w paski 10 min. Warzywa 4 min. Sos sojowy opcja.'},
{time:'19:00',name:'ğŸ¥š Jajka gotow. + TwarÃ³g + Ziemniaki',cls:'',kcal:598,b:72,w:50,t:11,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 250g twarÃ³g Â· 150g ziemniaki Â· 200g marchewka',
recipe:'Ziemniaki + marchewka w plastry, gotuj 15 min. Jajka gotowane 8 min. TwarÃ³g z boku.'}
]},
{n:'ÅšRO',cls:'org',bdg:'org',bdgT:'SERCA ğŸ«€',kcal:2130,b:278,w:128,t:49,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + sÃ³l + cytryna',recipe:'Shaker.'},
{time:'16:00',name:'ğŸ«€ Serca + PierÅ› + Jaglana + Szpinak',cls:'org',kcal:946,b:101,w:50,t:34,
ing:'300g serca kurczaka Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 150g szpinak mroÅ¼ony',
recipe:'Kasza jaglana PRZEPÅUCZ, gotuj 15 min. Serca przekrÃ³j na pÃ³Å‚, gotuj w wodzie 15-20 min (NIE smaÅ¼!). PierÅ› w kostkÄ™ osobno. Cebula. Szpinak 3 min.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej) + Warzywa',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 300g twarÃ³g Â· 200g mix warzywny',
recipe:'Jajka 8 min. TwarÃ³g 300g. Warzywa mikrofala.'}
]},
{n:'CZW',cls:'',bdg:'std',bdgT:'STANDARD C',kcal:2113,b:276,w:171,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + sÃ³l + cytryna',recipe:'Shaker.'},
{time:'16:00',name:'ğŸ— PierÅ› + RyÅ¼ + BrokuÅ‚y',cls:'',kcal:809,b:99,w:62,t:13,
ing:'400g pierÅ› Â· 65g ryÅ¼ Â· 250g brokuÅ‚y mroÅ¼one Â· 5ml olej',
recipe:'RyÅ¼ 12 min. PierÅ› w kostkÄ™. BrokuÅ‚y 5 min.'},
{time:'19:00',name:'ğŸ¥š Jajka gotow. + TwarÃ³g + Groszek',cls:'',kcal:656,b:80,w:57,t:12,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 250g twarÃ³g Â· 35g kasza gryczana Â· 150g groszek mroÅ¼ony',
recipe:'Kasza 10 min. Jajka 8 min. Groszek z mikrofali 3 min. TwarÃ³g.'}
]},
{n:'PIÄ„',cls:'org',bdg:'org',bdgT:'WÄ„TRÃ“BKA ğŸ«€',kcal:1954,b:265,w:128,t:36,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + sÃ³l + cytryna',recipe:'Shaker.'},
{time:'16:00',name:'ğŸ«€ WÄ…trÃ³bka + PierÅ› + Jaglana',cls:'org',kcal:770,b:88,w:50,t:21,
ing:'200g wÄ…trÃ³bka drobiowa Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 150g szpinak Â· 5ml olej',
recipe:'Kasza 15 min. WÄ…trÃ³bka plastry 1cm â€” MAX 3-4 min/stronÄ™ (nie przesusz!). PierÅ› osobno. Cebula na oleju. âš ï¸ Max 1Ã—/tydzieÅ„ (wit.A)!'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej) + Warzywa',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 300g twarÃ³g Â· 200g mix warzywny',
recipe:'Jajka 8 min. TwarÃ³g 300g. Warzywa mikrofala.'}
]},
{n:'SOB',cls:'psm',bdg:'psm',bdgT:'TRUE PSMF âš¡',kcal:1189,b:222,w:40,t:10,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake PSMF + Chia',cls:'psm',kcal:484,b:92,w:21,t:3,
ing:'400g twarÃ³g Â· woda Â· 6 biaÅ‚ek Â· 10g chia Â· cynamon/kakao',recipe:'Blend wieczorem. Rano wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity (KRYTYCZNE!)',cls:'psm',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + Â½ Å‚yÅ¼. soli + cytryna + Survival Drink (1L w ciÄ…gu dnia)',
recipe:'Pij powoli. Bez elektrolitÃ³w = bÃ³le gÅ‚owy!'},
{time:'16:00',name:'ğŸ— GOTOWANY kurczak + surowe warzywa',cls:'psm',kcal:507,b:90,w:11,t:7,
ing:'400g pierÅ› GOTOWANA w wodzie Â· 300g ogÃ³rek Â· 100g saÅ‚ata lodowa',
recipe:'PierÅ› GOTUJ w wodzie z solÄ… 20 min (NIE smaÅ¼! zero oleju!). OgÃ³rek w plastry. SaÅ‚ata. Cytryna.'},
{time:'19:00',name:'ğŸ§€ Mini-twarÃ³g + biaÅ‚ka [opcjonalny]',cls:'psm',kcal:193,b:40,w:7,t:0,
ing:'150g twarÃ³g Â· 4 biaÅ‚ka gotowane',
recipe:'+40g biaÅ‚ka dla ochrony miÄ™Å›ni.'}
]},
{n:'NIE',cls:'ref',bdg:'ref',bdgT:'REFEED ğŸŸ¢',kcal:2482,b:244,w:270,t:38,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake REFEED + Chia',cls:'ref',kcal:956,b:110,w:108,t:8,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity Shot',cls:'',kcal:5,b:0,w:1,t:0,
ing:'500ml wody + sÃ³l + cytryna',recipe:'Shaker.'},
{time:'16:00',name:'ğŸ— DUÅ»Y Kurczak + DUÅ»Y RyÅ¼',cls:'ref',kcal:1045,b:99,w:109,t:18,
ing:'400g pierÅ› Â· 120g ryÅ¼ Â· 200g mix warzywny Â· 10ml olej',
recipe:'RyÅ¼ w 500ml wody 18 min â€” MEGA porcja. Kurczak jak zwykle. Olej podwÃ³jny.'},
{time:'19:00',name:'ğŸ¥š Jajka + Makaron',cls:'ref',kcal:476,b:35,w:52,t:12,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka gotowane Â· 60g makaron Â· 150g mix warzywny',
recipe:'Makaron 8 min. Jajka gotowane. Warzywa.'}
]}
],
// â”€â”€â”€ TYDZIEÅƒ 2 â”€â”€â”€
[
{n:'PON',cls:'',bdg:'std',bdgT:'KASZA GRYCZANA',kcal:1990,b:268,w:155,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker 500ml',recipe:'Jak zawsze.'},
{time:'16:00',name:'ğŸ— PierÅ› + Kasza Gryczana + Kalafior',cls:'',kcal:744,b:99,w:53,t:14,
ing:'400g pierÅ› Â· 55g kasza gryczana Â· 250g kalafior mroÅ¼ony Â· 5ml olej',
recipe:'Kasza 10 min. Kurczak w kostkÄ™. Kalafior 5 min.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Ziemniaki',cls:'',kcal:598,b:72,w:50,t:11,
ing:'2 jajka gotowane Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 150g ziemniaki Â· 200g marchewka',
recipe:'Ziemniaki + marchewka 15 min. Jajka 8 min.'}
]},
{n:'WTO',cls:'',bdg:'std',bdgT:'TERIYAKI',kcal:2092,b:270,w:171,t:28,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,
ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker 500ml',recipe:''},
{time:'16:00',name:'ğŸ— Kurczak Teriyaki + RyÅ¼',cls:'',kcal:812,b:97,w:66,t:12,
ing:'400g pierÅ› Â· 65g ryÅ¼ Â· 200g mix warzywny Â· 15ml sos sojowy Â· 5ml olej',
recipe:'RyÅ¼ 12 min. Kurczak w paski, smaÅ¼ 10 min. Polej sosem sojowym na koniec. Warzywa.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Kasza Gryczana',cls:'',kcal:632,b:76,w:53,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 40g kasza gryczana Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'ÅšRO',cls:'org',bdg:'org',bdgT:'SERCA + SZPINAK ğŸ«€',kcal:2130,b:278,w:128,t:49,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker 500ml',recipe:''},
{time:'16:00',name:'ğŸ«€ Serca + PierÅ› + Jaglana + Szpinak',cls:'org',kcal:946,b:101,w:50,t:34,
ing:'300g serca Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 150g szpinak mroÅ¼ony',
recipe:'Kasza PRZEPÅUCZ 15 min. Serca gotuj w wodzie 15-20 min. PierÅ› osobno. Szpinak 3 min.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej)',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'CZW',cls:'',bdg:'std',bdgT:'BULGUR + CUKINIA',kcal:2007,b:270,w:150,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— PierÅ› + Bulgur + Cukinia',cls:'',kcal:750,b:98,w:52,t:13,
ing:'400g pierÅ› Â· 60g bulgur Â· 200g cukinia Â· 100g pomidory Â· 5ml olej',
recipe:'Bulgur 12 min. Kurczak w kostkÄ™. Cukinia w plastry. Pomidory pokrÃ³j.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Fasolka',cls:'',kcal:609,b:75,w:46,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 35g kasza jaglana Â· 200g fasolka szparagowa',
recipe:'Kasza 15 min. Jajka 8 min. Fasolka z mikrofali 4 min.'}
]},
{n:'PIÄ„',cls:'org',bdg:'org',bdgT:'SERCA + GROSZEK ğŸ«€',kcal:2258,b:285,w:154,t:49,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ«€ Serca + PierÅ› + Jaglana + Groszek',cls:'org',kcal:1074,b:108,w:76,t:34,
ing:'300g serca Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 200g groszek mroÅ¼ony',
recipe:'Kasza PRZEPÅUCZ 15 min. Serca gotuj w wodzie 20 min. PierÅ› kostkuj. Cebula. Groszek 3 min.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej)',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'SOB',cls:'psm',bdg:'psm',bdgT:'TRUE PSMF âš¡',kcal:1189,b:222,w:40,t:10,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake PSMF + Chia',cls:'psm',kcal:484,b:92,w:21,t:3,ing:'400g twarÃ³g Â· woda Â· 6 biaÅ‚ek Â· 10g chia Â· cynamon/kakao',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity + Survival',cls:'psm',kcal:5,b:0,w:1,t:0,ing:'Shaker + 1L survival drink',recipe:'Pij powoli.'},
{time:'16:00',name:'ğŸ— GOTOWANY kurczak + warzywa',cls:'psm',kcal:507,b:90,w:11,t:7,ing:'400g pierÅ› gotowana Â· 300g ogÃ³rek Â· 100g saÅ‚ata',recipe:'Gotuj w wodzie 20 min.'},
{time:'19:00',name:'ğŸ§€ Mini-twarÃ³g [opcja]',cls:'psm',kcal:193,b:40,w:7,t:0,ing:'150g twarÃ³g Â· 4 biaÅ‚ka gotowane',recipe:''}
]},
{n:'NIE',cls:'ref',bdg:'ref',bdgT:'REFEED ğŸŸ¢',kcal:2451,b:240,w:269,t:37,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake REFEED + Chia',cls:'ref',kcal:956,b:110,w:108,t:8,ing:'400g twarÃ³g Â· 300ml mleko Â· 6 biaÅ‚ek Â· 120g banan Â· 50g pÅ‚atki Â· 15g miÃ³d Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— DUÅ»Y Kurczak + DUÅ»Y RyÅ¼',cls:'ref',kcal:1045,b:99,w:109,t:18,
ing:'400g pierÅ› Â· 120g ryÅ¼ Â· 200g mix warzywny Â· 10ml olej',recipe:'MEGA porcja ryÅ¼u.'},
{time:'19:00',name:'ğŸ¥š Jajka + RyÅ¼',cls:'ref',kcal:445,b:31,w:51,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 50g ryÅ¼ Â· 150g mix warzywny',recipe:'RyÅ¼ 12 min. Jajka gotowane.'}
]}
],
// â”€â”€â”€ TYDZIEÅƒ 3 â”€â”€â”€
[
{n:'PON',cls:'',bdg:'std',bdgT:'WÄ˜GIERSKI',kcal:2093,b:268,w:169,t:32,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— Kurczak WÄ™gierski + RyÅ¼',cls:'',kcal:813,b:95,w:64,t:16,
ing:'400g pierÅ› Â· 60g ryÅ¼ Â· 100g cebula Â· 150g pomidory Â· 30g Å›mietana 12% Â· 5ml olej',
recipe:'Kurczak w kostkÄ™ + cebula smaÅ¼. Dodaj pomidory pokrojone + Å›mietanÄ™ = sos. RyÅ¼ 12 min.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Kasza Gryczana',cls:'',kcal:632,b:76,w:53,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 40g kasza gryczana Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'WTO',cls:'',bdg:'std',bdgT:'KUSKUS',kcal:2044,b:268,w:159,t:28,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— PierÅ› + Kuskus + Warzywa',cls:'',kcal:798,b:99,w:57,t:13,
ing:'400g pierÅ› Â· 55g kuskus Â· 200g mix warzywny Â· 100g pomidory Â· 5ml olej',
recipe:'Kuskus: zalej wrzÄ…tkiem, przykryj 5 min. Kurczak w paski. Warzywa. Pomidory.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Ziemniaki',cls:'',kcal:598,b:72,w:50,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 150g ziemniaki Â· 200g marchewka',recipe:'Ziemniaki + marchewka 15 min.'}
]},
{n:'ÅšRO',cls:'org',bdg:'org',bdgT:'SERCA MYÅšLIWSKU ğŸ«€',kcal:2073,b:269,w:130,t:48,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ«€ Serca Po MyÅ›liwsku + Kasza',cls:'org',kcal:889,b:92,w:52,t:33,
ing:'300g serca Â· 150g pierÅ› Â· 55g kasza gryczana Â· 150g pieczarki Â· 100g cebula',
recipe:'Kasza 10 min. Serca gotuj w wodzie 20 min, pokrÃ³j. PierÅ› osobno. Pieczarki + cebula smaÅ¼ na suchej patelni. Wszystko razem.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej)',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'CZW',cls:'',bdg:'std',bdgT:'BASMATI',kcal:2126,b:276,w:175,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— PierÅ› + RyÅ¼ Basmati + BrokuÅ‚y + Marchewka',cls:'',kcal:822,b:99,w:66,t:13,
ing:'400g pierÅ› Â· 65g ryÅ¼ basmati Â· 200g brokuÅ‚y Â· 100g marchewka Â· 5ml olej',
recipe:'RyÅ¼ basmati 15 min. Kurczak. BrokuÅ‚y + marchewka 5 min.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Groszek',cls:'',kcal:656,b:80,w:57,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 35g kasza gryczana Â· 150g groszek',recipe:'Kasza 10 min. Groszek 3 min.'}
]},
{n:'PIÄ„',cls:'',bdg:'std',bdgT:'SPAGHETTI ğŸ',kcal:1954,b:264,w:146,t:27,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ Spaghetti Bolognese z Kurczaka',cls:'',kcal:790,b:88,w:71,t:12,
ing:'350g pierÅ› mielona Â· 70g spaghetti Â· 150g passata Â· 80g cebula Â· 80g marchewka Â· 5ml olej',
recipe:'PierÅ› zmiel lub posiekaj drobno. Cebula + marchew smaÅ¼. Dodaj passatÄ™. Spaghetti al dente.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Warzywa',cls:'',kcal:516,b:79,w:23,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 150g mix warzywny',recipe:'Standard.'}
]},
{n:'SOB',cls:'psm',bdg:'psm',bdgT:'TRUE PSMF âš¡',kcal:1189,b:222,w:40,t:10,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake PSMF + Chia',cls:'psm',kcal:484,b:92,w:21,t:3,ing:'400g twarÃ³g Â· woda Â· 6 biaÅ‚ek Â· 10g chia',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity + Survival',cls:'psm',kcal:5,b:0,w:1,t:0,ing:'Shaker + survival drink',recipe:''},
{time:'16:00',name:'ğŸ— GOTOWANY kurczak + warzywa',cls:'psm',kcal:507,b:90,w:11,t:7,ing:'400g pierÅ› gotowana Â· 300g ogÃ³rek Â· 100g saÅ‚ata',recipe:'Gotuj 20 min.'},
{time:'19:00',name:'ğŸ§€ Mini-twarÃ³g [opcja]',cls:'psm',kcal:193,b:40,w:7,t:0,ing:'150g twarÃ³g Â· 4 biaÅ‚ka',recipe:''}
]},
{n:'NIE',cls:'ref',bdg:'ref',bdgT:'REFEED ğŸŸ¢',kcal:2482,b:244,w:270,t:38,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake REFEED + Chia',cls:'ref',kcal:956,b:110,w:108,t:8,ing:'400g twarÃ³g Â· 300ml mleko Â· 6 biaÅ‚ek Â· 120g banan Â· 50g pÅ‚atki Â· 15g miÃ³d Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— DUÅ»Y Kurczak + DUÅ»Y RyÅ¼',cls:'ref',kcal:1045,b:99,w:109,t:18,
ing:'400g pierÅ› Â· 120g ryÅ¼ Â· 200g warzywa Â· 10ml olej',recipe:'MEGA porcja.'},
{time:'19:00',name:'ğŸ¥š Jajka + Makaron',cls:'ref',kcal:476,b:35,w:52,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 60g makaron Â· 150g mix warzywny',recipe:'Makaron 8 min.'}
]}
],
// â”€â”€â”€ TYDZIEÅƒ 4 â”€â”€â”€
[
{n:'PON',cls:'',bdg:'std',bdgT:'TANDOORI',kcal:2109,b:274,w:171,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— Kurczak Tandoori + RyÅ¼ Basmati',cls:'',kcal:829,b:101,w:66,t:13,
ing:'400g pierÅ› Â· 65g ryÅ¼ basmati Â· 50g jogurt 0% Â· 200g mix warzywny Â· 5ml olej',
recipe:'Marynuj pierÅ› w jogurcie + curry/kurkuma 30 min (lub wieczorem). RyÅ¼ basmati 15 min. Warzywa.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Kasza Gryczana',cls:'',kcal:632,b:76,w:53,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 40g kasza gryczana Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'WTO',cls:'',bdg:'std',bdgT:'ZIEMNIAKI',kcal:1984,b:267,w:146,t:28,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— PierÅ› + Ziemniaki + Warzywa',cls:'',kcal:727,b:95,w:48,t:12,
ing:'400g pierÅ› Â· 200g ziemniaki Â· 200g mix warzywny Â· 5ml olej',
recipe:'Ziemniaki gotuj 15 min. Kurczak w kostkÄ™. Warzywa mikrofala.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Fasolka',cls:'',kcal:609,b:75,w:46,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 35g kasza jaglana Â· 200g fasolka szparagowa',recipe:'Kasza 15 min. Fasolka 4 min.'}
]},
{n:'ÅšRO',cls:'org',bdg:'org',bdgT:'SERCA + SZPINAK ğŸ«€',kcal:2130,b:278,w:128,t:49,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ«€ Serca + PierÅ› + Jaglana + Szpinak',cls:'org',kcal:946,b:101,w:50,t:34,
ing:'300g serca Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 150g szpinak',
recipe:'Kasza PRZEPÅUCZ 15 min. Serca gotuj w wodzie 20 min. PierÅ›. Szpinak.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej)',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'CZW',cls:'',bdg:'std',bdgT:'HONEY GARLIC',kcal:2152,b:275,w:182,t:29,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— Kurczak Honey Garlic + RyÅ¼',cls:'',kcal:848,b:98,w:73,t:13,
ing:'400g pierÅ› Â· 70g ryÅ¼ Â· 200g brokuÅ‚y Â· 10g miÃ³d Â· 10ml sos sojowy Â· 5ml olej',
recipe:'Kurczak smaÅ¼ w kostkÄ™, polej miÃ³d + sos sojowy na koniec. RyÅ¼ 12 min. BrokuÅ‚y.'},
{time:'19:00',name:'ğŸ¥š Jajka + TwarÃ³g + Groszek',cls:'',kcal:656,b:80,w:57,t:12,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 250g twarÃ³g Â· 35g kasza gryczana Â· 150g groszek',recipe:'Kasza 10 min. Groszek 3 min.'}
]},
{n:'PIÄ„',cls:'org',bdg:'org',bdgT:'SERCA + GROSZEK ğŸ«€',kcal:2258,b:285,w:154,t:49,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake Banana + Chia',cls:'',kcal:643,b:97,w:51,t:4,ing:'400g twarÃ³g Â· 250ml mleko Â· 5 biaÅ‚ek Â· 80g banan Â· 10g chia + supl.',recipe:'Blend banana+chia wieczorem. Rano 5 sek wstrzÄ…Å›nij.'},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ«€ Serca + PierÅ› + Jaglana + Groszek',cls:'org',kcal:1074,b:108,w:76,t:34,
ing:'300g serca Â· 200g pierÅ› Â· 50g kasza jaglana Â· 100g cebula Â· 200g groszek',
recipe:'Kasza PRZEPÅUCZ 15 min. Serca gotuj 20 min. PierÅ›. Groszek 3 min.'},
{time:'19:00',name:'ğŸ¥š Jajka(2) + TwarÃ³g (wiÄ™cej)',cls:'',kcal:536,b:80,w:26,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 300g twarÃ³g Â· 200g mix warzywny',recipe:'Standard.'}
]},
{n:'SOB',cls:'psm',bdg:'psm',bdgT:'TRUE PSMF âš¡',kcal:1189,b:222,w:40,t:10,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake PSMF + Chia',cls:'psm',kcal:484,b:92,w:21,t:3,ing:'400g twarÃ³g Â· woda Â· 6 biaÅ‚ek Â· 10g chia',recipe:''},
{time:'10:00',name:'ğŸ’§ Elektrolity + Survival',cls:'psm',kcal:5,b:0,w:1,t:0,ing:'Shaker + survival',recipe:''},
{time:'16:00',name:'ğŸ— GOTOWANY kurczak + warzywa',cls:'psm',kcal:507,b:90,w:11,t:7,ing:'400g pierÅ› gotowana Â· 300g ogÃ³rek Â· 100g saÅ‚ata',recipe:''},
{time:'19:00',name:'ğŸ§€ Mini-twarÃ³g [opcja]',cls:'psm',kcal:193,b:40,w:7,t:0,ing:'150g twarÃ³g Â· 4 biaÅ‚ka',recipe:''}
]},
{n:'NIE',cls:'ref',bdg:'ref',bdgT:'REFEED ğŸŸ¢',kcal:2451,b:240,w:269,t:37,
meals:[
{time:'04:00',name:'ğŸ¥¤ Shake REFEED + Chia',cls:'ref',kcal:956,b:110,w:108,t:8,ing:'400g twarÃ³g Â· 300ml mleko Â· 6 biaÅ‚ek Â· 120g banan Â· 50g pÅ‚atki Â· 15g miÃ³d Â· 10g chia + supl.',recipe:''},
{time:'10:00',name:'ğŸ’§ Elektrolity',cls:'',kcal:5,b:0,w:1,t:0,ing:'Shaker',recipe:''},
{time:'16:00',name:'ğŸ— DUÅ»Y Kurczak + DUÅ»Y RyÅ¼',cls:'ref',kcal:1045,b:99,w:109,t:18,
ing:'400g pierÅ› Â· 120g ryÅ¼ Â· 200g warzywa Â· 10ml olej',recipe:'MEGA porcja.'},
{time:'19:00',name:'ğŸ¥š Jajka + RyÅ¼',cls:'ref',kcal:445,b:31,w:51,t:11,
ing:'2 jajka Â· 3 biaÅ‚ka Â· 50g ryÅ¼ Â· 150g mix warzywny',recipe:''}
]}
]
];

// WEEKLY AVERAGES for display
const WAVG=[
{kcal:1998,b:261,w:152,t:31,cost:299},
{kcal:2017,b:262,w:152,t:33,cost:304},
{kcal:1994,b:259,w:156,t:30,cost:302},
{kcal:2039,b:263,w:156,t:33,cost:306}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHOPPING DATA PER WEEK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SHOPPING=[
// T1
[
{i:'ğŸ”´',n:'BIAÅKO',items:[
{n:'PierÅ› kurczaka',a:'2.4 kg',p:52},{n:'Serca kurczaka',a:'300g',p:5},
{n:'WÄ…trÃ³bka drobiowa',a:'200g',p:4},{n:'Jajka M (10szt)',a:'8 opakowaÅ„',p:88},
{n:'TwarÃ³g Pilos 0% (250g)',a:'18 szt',p:63}
]},
{i:'ğŸŸ¡',n:'WÄ˜GLE',items:[
{n:'RyÅ¼ biaÅ‚y',a:'500g',p:5},{n:'Kasza gryczana',a:'500g',p:5},
{n:'Kasza jaglana',a:'500g',p:6},{n:'Makaron peÅ‚noziarnisty',a:'500g',p:5},
{n:'PÅ‚atki owsiane',a:'500g',p:4},{n:'Ziemniaki',a:'500g',p:2}
]},
{i:'ğŸŸ¢',n:'WARZYWA / OWOCE',items:[
{n:'BrokuÅ‚y mroÅ¼one',a:'500g',p:5},{n:'Mix warzywny mroÅ¼ony',a:'1.5kg',p:12},
{n:'Szpinak mroÅ¼ony',a:'500g',p:6},{n:'Groszek mroÅ¼ony',a:'300g',p:4},
{n:'Marchewka',a:'500g',p:3},{n:'Cebula',a:'500g',p:2},
{n:'OgÃ³rki',a:'600g',p:4},{n:'SaÅ‚ata lodowa',a:'1 szt',p:3},
{n:'Cytryny',a:'7 szt',p:5},{n:'Banany',a:'800g',p:6},

]},
{i:'âš™ï¸',n:'INNE',items:[
{n:'Olej rzepakowy',a:'(masz)',p:0},{n:'SÃ³l himalajska',a:'(masz)',p:0},
{n:'Mleko 0.5%',a:'1L',p:3},{n:'MiÃ³d',a:'(masz)',p:0},{n:'Nasiona chia',a:'500g (starczy ~5tyg)',p:12},{n:'Glicyna (proszek)',a:'250g (starczy ~7tyg)',p:25}
]}
],
// T2
[
{i:'ğŸ”´',n:'BIAÅKO',items:[
{n:'PierÅ› kurczaka',a:'2.4 kg',p:52},{n:'Serca kurczaka',a:'600g',p:10},
{n:'Jajka M (10szt)',a:'8 opakowaÅ„',p:88},{n:'TwarÃ³g Pilos 0% (250g)',a:'18 szt',p:63}
]},
{i:'ğŸŸ¡',n:'WÄ˜GLE',items:[
{n:'RyÅ¼ biaÅ‚y',a:'500g',p:5},{n:'Kasza gryczana',a:'500g',p:5},
{n:'Kasza jaglana',a:'500g',p:6},{n:'Bulgur',a:'500g',p:5},
{n:'PÅ‚atki owsiane',a:'500g',p:4},{n:'Ziemniaki',a:'500g',p:2}
]},
{i:'ğŸŸ¢',n:'WARZYWA / OWOCE',items:[
{n:'Kalafior mroÅ¼ony',a:'500g',p:5},{n:'Mix warzywny mroÅ¼ony',a:'1.5kg',p:12},
{n:'Szpinak mroÅ¼ony',a:'500g',p:6},{n:'Groszek mroÅ¼ony',a:'300g',p:4},
{n:'Fasolka szparagowa mroÅ¼ona',a:'400g',p:5},{n:'Cukinia',a:'400g',p:4},
{n:'Pomidory',a:'200g',p:3},{n:'Marchewka',a:'500g',p:3},
{n:'Cebula',a:'500g',p:2},{n:'OgÃ³rki',a:'600g',p:4},
{n:'SaÅ‚ata lodowa',a:'1 szt',p:3},{n:'Cytryny',a:'7 szt',p:5},
{n:'Banany',a:'800g',p:6},
]},
{i:'âš™ï¸',n:'INNE',items:[
{n:'Sos sojowy',a:'(masz/150ml)',p:4},{n:'Mleko 0.5%',a:'1L',p:3},
{n:'Nasiona chia',a:'100g',p:5},{n:'Nasiona chia',a:'(masz z T1)',p:0},{n:'Glicyna',a:'(masz z T1)',p:0}
]}
],
// T3
[
{i:'ğŸ”´',n:'BIAÅKO',items:[
{n:'PierÅ› kurczaka',a:'2.55 kg',p:55},{n:'Serca kurczaka',a:'300g',p:5},
{n:'Jajka M (10szt)',a:'8 opakowaÅ„',p:88},{n:'TwarÃ³g Pilos 0% (250g)',a:'18 szt',p:63}
]},
{i:'ğŸŸ¡',n:'WÄ˜GLE',items:[
{n:'RyÅ¼ biaÅ‚y',a:'500g',p:5},{n:'RyÅ¼ basmati',a:'500g',p:6},
{n:'Kasza gryczana',a:'500g',p:5},{n:'Kasza jaglana',a:'500g',p:6},
{n:'Kuskus',a:'500g',p:5},{n:'Spaghetti',a:'500g',p:5},
{n:'PÅ‚atki owsiane',a:'500g',p:4},{n:'Ziemniaki',a:'500g',p:2}
]},
{i:'ğŸŸ¢',n:'WARZYWA / OWOCE',items:[
{n:'BrokuÅ‚y mroÅ¼one',a:'500g',p:5},{n:'Mix warzywny mroÅ¼ony',a:'1.5kg',p:12},
{n:'Pieczarki',a:'300g',p:4},{n:'Pomidory',a:'500g',p:5},
{n:'Passata',a:'300g',p:3},{n:'Marchewka',a:'500g',p:3},
{n:'Cebula',a:'500g',p:2},{n:'OgÃ³rki',a:'600g',p:4},
{n:'SaÅ‚ata lodowa',a:'1 szt',p:3},{n:'Cytryny',a:'7 szt',p:5},
{n:'Banany',a:'800g',p:6},
]},
{i:'âš™ï¸',n:'INNE',items:[
{n:'Åšmietana 12%',a:'200ml',p:3},{n:'Mleko 0.5%',a:'1L',p:3},
{n:'Nasiona chia',a:'100g',p:5},{n:'Nasiona chia',a:'(masz z T1)',p:0},{n:'Glicyna',a:'(masz z T1)',p:0}
]}
],
// T4
[
{i:'ğŸ”´',n:'BIAÅKO',items:[
{n:'PierÅ› kurczaka',a:'2.4 kg',p:52},{n:'Serca kurczaka',a:'600g',p:10},
{n:'Jajka M (10szt)',a:'8 opakowaÅ„',p:88},{n:'TwarÃ³g Pilos 0% (250g)',a:'18 szt',p:63}
]},
{i:'ğŸŸ¡',n:'WÄ˜GLE',items:[
{n:'RyÅ¼ biaÅ‚y',a:'500g',p:5},{n:'RyÅ¼ basmati',a:'500g',p:6},
{n:'Kasza gryczana',a:'500g',p:5},{n:'Kasza jaglana',a:'500g',p:6},
{n:'PÅ‚atki owsiane',a:'500g',p:4},{n:'Ziemniaki',a:'500g',p:2}
]},
{i:'ğŸŸ¢',n:'WARZYWA / OWOCE',items:[
{n:'BrokuÅ‚y mroÅ¼one',a:'500g',p:5},{n:'Mix warzywny mroÅ¼ony',a:'1.5kg',p:12},
{n:'Szpinak mroÅ¼ony',a:'500g',p:6},{n:'Groszek mroÅ¼ony',a:'300g',p:4},
{n:'Fasolka szparagowa mroÅ¼ona',a:'400g',p:5},{n:'Marchewka',a:'500g',p:3},
{n:'Cebula',a:'500g',p:2},{n:'OgÃ³rki',a:'600g',p:4},
{n:'SaÅ‚ata lodowa',a:'1 szt',p:3},{n:'Cytryny',a:'7 szt',p:5},
{n:'Banany',a:'800g',p:6},
]},
{i:'âš™ï¸',n:'INNE',items:[
{n:'Sos sojowy',a:'(masz/150ml)',p:4},{n:'Jogurt 0%',a:'200g',p:3},
{n:'MiÃ³d',a:'(masz)',p:0},{n:'Mleko 0.5%',a:'1L',p:3},
{n:'Nasiona chia',a:'100g',p:5},{n:'Nasiona chia',a:'(masz z T1)',p:0},{n:'Glicyna',a:'(masz z T1)',p:0}
]}
]
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SUPPLEMENTS & PSMF
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SUPPS=[
{t:'04:00',l:'ğŸŒ… Rano (z shake)',items:['L-Tyrozyna 1000mg','Panax Ginseng 600mg','D3+K2','Vit C 1000mg','B12 1000mcg','PROZMA+','ALCAR 500mg','NAC 600mg','Shilajit','Boron 3mg']},
{t:'16:00',l:'ğŸ½ï¸ Z posiÅ‚kiem',items:['Omega-3 4Ã—kaps (2 z obiadem + 2 z kolacjÄ…)']},
{t:'21:00',l:'ğŸŒ™ WieczÃ³r',items:['MSM 2g + Glicyna 5g w wodzie 300ml']},
{t:'22:00',l:'ğŸ˜´ Przed snem',items:['Melatonina 3mg','PROZMA+ (2-ga dawka)']}
];
const PSMF_CHK=['Shake PSMF + Chia blend wieczorem â†’ rano wstrzÄ…Å›nij','10 suplementÃ³w poÅ‚kniÄ™tych','Elektrolity SHOT o 10:00 (shaker!)','Survival Drink (1L) w ciÄ…gu dnia','Gotowany kurczak 400g o 16:00 (ZERO oleju!)','Surowe warzywa (ogÃ³rek + saÅ‚ata)','Mini-twarÃ³g + biaÅ‚ka o 19:00 (opcja)','Min. 5L wody Å‚Ä…cznie','Samopoczucie OK â€” brak zawrotÃ³w','Melatonina + PROZMA+ przed snem'];

// MEAL PREP data
const PREP=[
// T1
['NIE wieczÃ³r: Blend shake PON (banana + 10g chia). Ugotuj jajka na 2 dni (10 szt). Odmierz twarÃ³g.','WTO wieczÃ³r: Blend shake ÅšRO (banana + chia). Ugotuj jajka. Przygotuj serca (300g) â€” moÅ¼esz ugotowaÄ‡ z wieczora.','CZW wieczÃ³r: Blend shake PIÄ„ (banana + chia). Ugotuj jajka. Odmierz wÄ…trÃ³bkÄ™ 200g (rozmraÅ¼aj w lodÃ³wce).','SOB: PSMF â€” minimalne gotowanie. Ugotuj pierÅ› 400g w wodzie. Blend shake PSMF + chia na wieczÃ³r.'],
// T2
['NIE wieczÃ³r: Blend shake PON (banana + chia). Ugotuj jajka 10 szt. Odmierz kasza gryczana + kalafior.','WTO wieczÃ³r: Blend shake ÅšRO (banana + chia). Ugotuj jajka. Przygotuj serca 300g.','CZW wieczÃ³r: Blend shake PIÄ„ (banana + chia). Ugotuj jajka. Przygotuj serca 300g (2-gi dzieÅ„ serc w tygodniu).','SOB: PSMF day. Ugotuj pierÅ›. Blend shake.'],
// T3
['NIE wieczÃ³r: Blend shake PON (banana + chia). Ugotuj jajka. Przygotuj sos wÄ™gierski (cebula + pomidory + Å›mietana).','WTO wieczÃ³r: Blend shake ÅšRO (banana + chia). Ugotuj jajka. Przygotuj serca 300g + pieczarki.','CZW wieczÃ³r: Blend shake PIÄ„ (banana + chia). Ugotuj jajka. Zmiel/posiekaj 350g piersi na spaghetti.','SOB: PSMF. Ugotuj pierÅ›. Blend shake.'],
// T4
['NIE wieczÃ³r: Blend shake PON (banana + chia). Ugotuj jajka. Marynuj pierÅ› w jogurcie + curry (tandoori).','WTO wieczÃ³r: Blend shake ÅšRO (banana + chia). Ugotuj jajka. Przygotuj serca 300g.','CZW wieczÃ³r: Blend shake PIÄ„ (banana + chia). Ugotuj jajka. Przygotuj serca 300g + groszek.','SOB: PSMF. Ugotuj pierÅ›. Blend shake.']
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const LS='dmv7';
let S;
function load(){try{S=JSON.parse(localStorage.getItem(LS))||{}}catch(e){S={}}
if(!S.w)S.w=[];if(!S.water)S.water=0;if(!S.waterDate)S.waterDate='';
if(!S.wk)S.wk=0;if(!S.day)S.day=0;
if(!S.shopChk)S.shopChk={};if(!S.suppTk)S.suppTk={};
if(!S.psmfChk)S.psmfChk={};if(!S.streak)S.streak=0;
if(!S.shopWk)S.shopWk=0;if(!S.prepWk)S.prepWk=0;if(!S.mealChk)S.mealChk={};if(!S.notifSent)S.notifSent={};
}
function save(){localStorage.setItem(LS,JSON.stringify(S))}
function toast(m,ok=true){const t=document.getElementById('toast');t.className='toast on '+(ok?'ok':'er');document.getElementById('tIco').textContent=ok?'âœ…':'âŒ';document.getElementById('tMsg').textContent=m;setTimeout(()=>t.classList.remove('on'),2200)}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function navT(){document.getElementById('nav').classList.toggle('on');document.getElementById('ov').classList.toggle('on');const b=document.getElementById('mbtn');b.classList.toggle('x');b.textContent=b.classList.contains('x')?'âœ•':'â˜°'}
function navC(){document.getElementById('nav').classList.remove('on');document.getElementById('ov').classList.remove('on');const b=document.getElementById('mbtn');b.classList.remove('x');b.textContent='â˜°'}
function go(id){document.querySelectorAll('.sec').forEach(s=>s.classList.remove('on'));document.getElementById(id).classList.add('on');document.querySelectorAll('.nbtn').forEach(b=>{b.classList.toggle('on',b.dataset.s===id)});navC();vib(HAP.nav)}
document.querySelectorAll('.nbtn').forEach(b=>b.addEventListener('click',()=>go(b.dataset.s)));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEEK SELECTOR (shared)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renWeekSel(id,cur,cb){
let h='';for(let i=0;i<4;i++) h+=`<div class="ws ${cur===i?'on':''}" onclick="${cb}(${i})">T${i+1}</div>`;
document.getElementById(id).innerHTML=h;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updDash(){
const di=getCurDi();
const wk=getCurWk();
const d=WEEKS[wk][di];
document.getElementById('dKc').textContent=d.kcal;
document.getElementById('dP').textContent=d.b;
document.getElementById('dW').textContent=d.w;
document.getElementById('dT').textContent=d.t;
const bg=document.getElementById('dayBdg');bg.textContent=d.bdgT;bg.className='badge '+d.bdg;
document.getElementById('todD').textContent=new Date().toLocaleDateString('pl-PL',{weekday:'long',day:'numeric',month:'short'});
document.getElementById('hWk').textContent=S.wk+1;
let h='';const cwk=getCurWk();d.meals.forEach((m,mi)=>{
const done=isMealDone(mi);
h+=`<div class="mc ${m.cls}" style="${done?'opacity:.4':''}">
<div class="mt">${m.time}</div><div class="mn">${m.name}</div>
<div class="mm"><span class="mbdg kc">${m.kcal} kcal</span><span class="mbdg bp">${m.b}g B</span></div>
<div class="mchk-row"><button class="mchk-btn ${done?'done':''}" onclick="event.stopPropagation();toggleMeal(${cwk},${getCurDi()},${mi})">${done?'âœ… Zjedzone':'â˜ Oznacz'}</button><span class="mchk-lbl">${done?'gotowe':''}</span></div>
</div>`;});
document.getElementById('todM').innerHTML=h;
const td=new Date().toDateString();if(S.waterDate!==td){S.water=0;S.waterDate=td;save()}
document.getElementById('dWat').textContent=(S.water/1000).toFixed(1);
document.getElementById('hw').textContent=(S.water/1000).toFixed(1);
if(S.w.length){const last=S.w[S.w.length-1].w;document.getElementById('hwt').textContent=last.toFixed(1);document.getElementById('cWt').textContent=last.toFixed(1);const lost=Math.max(0,(100-last)).toFixed(1);const left=Math.max(0,(last-82)).toFixed(1);document.getElementById('lostK').textContent=lost;document.getElementById('leftK').textContent=left;const pct=Math.min(100,Math.max(0,(100-last)/(100-82)*100));document.getElementById('pRing').setAttribute('stroke-dashoffset',440-(440*pct/100));}
document.getElementById('dStr').textContent=S.streak;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// JADÅOSPIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setWk(i){S.wk=i;save();renWeekSel('weekSel',S.wk,'setWk');renPlan();updDash()}
function setDay(i){S.day=i;save();renPlan()}
function renPlan(){
renWeekSel('weekSel',S.wk,'setWk');
['sc1','sc2','sc3'].forEach((id,i)=>{const el=document.getElementById(id);if(el)el.className='scale-btn'+(SCALE===i+1?' on':'');});
let h='';WEEKS[S.wk].forEach((d,i)=>{h+=`<button class="tab ${d.cls} ${S.day===i?'on':''}" onclick="setDay(${i})">${d.n}</button>`});
document.getElementById('dayTabs').innerHTML=h;
const d=WEEKS[S.wk][S.day];
let c=`<div class="al ${d.bdg==='psm'?'err':d.bdg==='ref'?'ok':d.bdg==='org'?'info':'info'}" style="margin-bottom:12px"><strong>${d.bdgT}</strong> â€” ${d.kcal} kcal | ${d.b}g B | ${d.w}g W | ${d.t}g T</div>`;
d.meals.forEach((m,mi)=>{
const scaledIng=scaleIng(m.ing);
c+=`<div class="mc ${m.cls}"><div class="mt">${m.time} | ${m.name}</div>
<div class="mm"><span class="mbdg kc">${SCALE>1?Math.round(m.kcal*SCALE):m.kcal} kcal</span><span class="mbdg bp">${SCALE>1?Math.round(m.b*SCALE):m.b}g B</span>${m.w?`<span class="mbdg wg">${SCALE>1?Math.round(m.w*SCALE):m.w}g W</span>`:''}<span class="mbdg tl">${SCALE>1?Math.round(m.t*SCALE):m.t}g T</span></div>
<div class="mi">${scaledIng.replace(/\n/g,'<br>')}</div>
${m.recipe?`<details style="margin-top:6px"><summary style="color:var(--or);cursor:pointer;font-size:.82em;font-weight:600">ğŸ“– Przepis</summary>
<div style="margin-top:5px;font-size:.82em;color:var(--t2);padding:6px;background:var(--bg3);border-radius:6px">${m.recipe}<br><button class="btn sm out" style="margin-top:6px" onclick="event.stopPropagation();speakRecipe('${m.name.replace(/'/g,"\\'")} â€” ${m.recipe.replace(/'/g,"\\'")}')">ğŸ”Š Czytaj na gÅ‚os</button></div></details>`:''}</div>`;});
c+=`<div class="msbar"><div class="i"><div class="l">Kcal</div><div class="v">${d.kcal}</div></div><div class="i"><div class="l">BiaÅ‚ko</div><div class="v">${d.b}g</div></div><div class="i"><div class="l">WÄ™gle</div><div class="v">${d.w}g</div></div><div class="i"><div class="l">TÅ‚uszcz</div><div class="v">${d.t}g</div></div></div>`;
document.getElementById('dayC').innerHTML=c;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ZAKUPY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setShopWk(i){S.shopWk=i;save();renShop()}
function renShop(){
renWeekSel('shopWeekSel',S.shopWk,'setShopWk');
document.getElementById('shopWkLbl').textContent='TydzieÅ„ '+(S.shopWk+1);
const shop=SHOPPING[S.shopWk];
let h='',tot=0,full=0;
shop.forEach((cat,ci)=>{
const ck=`w${S.shopWk}c${ci}`;const col=S.shopChk[ck+'_col'];
h+=`<div class="scat"><div class="sh ${col?'col':''}" onclick="shopCat('${ck}')"><span>${cat.i}</span><span>${cat.n}</span><span class="arr">â–¼</span></div><div class="sitems ${col?'hid':''}">`;
cat.items.forEach((it,ii)=>{
const ik=`w${S.shopWk}-${ci}-${ii}`;const ch=S.shopChk[ik];full+=it.p;if(!ch)tot+=it.p;
h+=`<div class="si ${ch?'chk':''}"><div class="schk ${ch?'on':''}" onclick="shopIt('${ik}')"></div><span class="sn">${it.n}</span><span class="sq">${it.a}</span><span class="sp">${it.p>0?it.p+' zÅ‚':'-'}</span></div>`;});
h+=`</div></div>`;});
document.getElementById('shopC').innerHTML=h;
document.getElementById('shopTot').textContent=tot+' zÅ‚ / '+full+' zÅ‚';
}
function shopCat(k){S.shopChk[k+'_col']=!S.shopChk[k+'_col'];save();renShop()}
function shopIt(k){S.shopChk[k]=!S.shopChk[k];save();renShop()}
function shopRst(){const wk=S.shopWk;Object.keys(S.shopChk).forEach(k=>{if(k.startsWith('w'+wk))delete S.shopChk[k]});save();renShop();toast('Lista zresetowana')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WAGA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addW(){const w=parseFloat(document.getElementById('wIn').value);const d=document.getElementById('dIn').value;if(!w||w<50||w>200){toast('Waga 50-200',false);return}if(!d){toast('Wybierz datÄ™',false);return}
const ex=S.w.findIndex(x=>x.d===d);if(ex>=0)S.w[ex].w=w;else S.w.push({d,w});S.w.sort((a,b)=>new Date(a.d)-new Date(b.d));save();renWaga();updDash();toast(w+' kg âœ“');document.getElementById('wIn').value=''}
function delW(d){S.w=S.w.filter(x=>x.d!==d);save();renWaga();updDash();toast('UsuniÄ™to')}
function renWaga(){renHist();renStats();renChart()}
function renHist(){const box=document.getElementById('wHist');if(!S.w.length){box.innerHTML='<p style="color:var(--t3);text-align:center;padding:14px">Brak pomiarÃ³w</p>';return}
let h='';[...S.w].reverse().forEach((e,i,a)=>{const prev=a[i+1];const ch=prev?(e.w-prev.w).toFixed(1):0;const cls=ch<0?'dn':ch>0?'up':'';const sg=ch>0?'+':'';
h+=`<div class="hi"><span class="dt">${new Date(e.d).toLocaleDateString('pl-PL',{day:'numeric',month:'short'})}</span><span class="wt">${e.w.toFixed(1)} kg</span><span class="ch ${cls}">${sg}${ch} kg</span><button class="del" onclick="delW('${e.d}')">ğŸ—‘ï¸</button></div>`});
box.innerHTML=h}
function renStats(){if(!S.w.length)return;const f=S.w[0].w,l=S.w[S.w.length-1].w,lo=Math.min(...S.w.map(x=>x.w));
const d0=new Date(S.w[0].d),dL=new Date(S.w[S.w.length-1].d);
const wks=Math.max(1,(dL-d0)/(7*86400000));
const avg=((f-l)/wks).toFixed(1);const left=l-82;const days=left>0?Math.ceil(left/Math.max(0.5,parseFloat(avg))*7):0;
document.getElementById('sStr').textContent=f.toFixed(1);document.getElementById('sLow').textContent=lo.toFixed(1);document.getElementById('sAvg').textContent=avg;document.getElementById('sDays').textContent=days>0?days:'â€”'}
function renChart(){const cv=document.getElementById('wChart');const ctx=cv.getContext('2d');const W=cv.parentElement.clientWidth-28;const H=195;cv.width=W;cv.height=H;ctx.fillStyle='#1a2336';ctx.fillRect(0,0,W,H);
if(S.w.length<2){ctx.fillStyle='#475569';ctx.font='12px Outfit';ctx.textAlign='center';ctx.fillText('Dodaj min. 2 pomiary',W/2,H/2);return}
const data=S.w.slice(-30);const vals=data.map(d=>d.w);const mn=Math.min(...vals)-1,mx=Math.max(...vals)+1;
const p={t:16,r:16,b:24,l:44};const gW=W-p.l-p.r,gH=H-p.t-p.b;
ctx.strokeStyle='#243048';ctx.lineWidth=1;
for(let i=0;i<=4;i++){const y=p.t+gH*i/4;ctx.beginPath();ctx.moveTo(p.l,y);ctx.lineTo(W-p.r,y);ctx.stroke();ctx.fillStyle='#475569';ctx.font='9px JetBrains Mono';ctx.textAlign='right';ctx.fillText((mx-(mx-mn)*i/4).toFixed(1),p.l-5,y+3)}
const gr=ctx.createLinearGradient(0,p.t,0,H-p.b);gr.addColorStop(0,'rgba(255,107,43,.2)');gr.addColorStop(1,'rgba(255,107,43,0)');
ctx.beginPath();ctx.moveTo(p.l,H-p.b);data.forEach((d,i)=>{const x=p.l+gW*i/(data.length-1);const y=p.t+gH*(1-(d.w-mn)/(mx-mn));ctx.lineTo(x,y)});ctx.lineTo(p.l+gW,H-p.b);ctx.closePath();ctx.fillStyle=gr;ctx.fill();
ctx.beginPath();data.forEach((d,i)=>{const x=p.l+gW*i/(data.length-1);const y=p.t+gH*(1-(d.w-mn)/(mx-mn));i===0?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.strokeStyle='#ff6b2b';ctx.lineWidth=2;ctx.stroke();
data.forEach((d,i)=>{const x=p.l+gW*i/(data.length-1);const y=p.t+gH*(1-(d.w-mn)/(mx-mn));ctx.beginPath();ctx.arc(x,y,3,0,Math.PI*2);ctx.fillStyle='#ff6b2b';ctx.fill()});
const gY=p.t+gH*(1-(82-mn)/(mx-mn));if(gY>p.t&&gY<H-p.b){ctx.setLineDash([3,3]);ctx.strokeStyle='#34d399';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(p.l,gY);ctx.lineTo(W-p.r,gY);ctx.stroke();ctx.setLineDash([]);ctx.fillStyle='#34d399';ctx.font='8px JetBrains Mono';ctx.textAlign='left';ctx.fillText('CEL 82kg',p.l+3,gY-3)}}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WODA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function watA(ml){const td=new Date().toDateString();if(S.waterDate!==td){S.water=0;S.waterDate=td}
S.water=Math.max(0,S.water+ml);save();renWat();updDash();vib(ml>0?HAP.add:HAP.remove);toast(ml>0?`+${ml}ml`:`${ml}ml`)}
function watRst(){S.water=0;save();renWat();updDash();toast('Reset')}
function renWat(){document.getElementById('wCur').textContent=S.water;const pct=Math.min(100,Math.round(S.water/5000*100));document.getElementById('wPct').textContent=pct;document.getElementById('wLvl').style.height=pct+'%'}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SUPLEMENTY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renSupp(){const td=new Date().toDateString();let h='';SUPPS.forEach(s=>{
h+=`<div class="spblk"><div class="hd"><span class="tm">${s.t}</span><span class="lb">${s.l}</span></div><div class="pills">`;
s.items.forEach(it=>{const k=`${td}-${s.t}-${it}`;const tk=S.suppTk[k];
h+=`<div class="pill ${tk?'tk':''}" onclick="suppTog('${k}')">${it}</div>`});
h+=`</div></div>`});document.getElementById('suppC').innerHTML=h}
function suppTog(k){S.suppTk[k]=!S.suppTk[k];save();renSupp();vib(HAP.done);toast(S.suppTk[k]?'âœ“':'Odznaczono')}
function suppRst(){const td=new Date().toDateString();Object.keys(S.suppTk).forEach(k=>{if(k.startsWith(td))delete S.suppTk[k]});save();renSupp();toast('Reset')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PSMF CHECKLIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renPsmf(){const td=new Date().toDateString();let h='';PSMF_CHK.forEach((it,i)=>{
const k=`${td}-psmf-${i}`;const ch=S.psmfChk[k];
h+=`<div class="qa" onclick="psmfTog('${k}')" style="border-left:3px solid ${ch?'var(--gr)':'var(--bg5)'}"><span class="i">${ch?'âœ…':'â¬œ'}</span><div class="t"><div class="tt" style="${ch?'text-decoration:line-through;opacity:.4':''}">${it}</div></div></div>`});
document.getElementById('psmfChk').innerHTML=h}
function psmfTog(k){S.psmfChk[k]=!S.psmfChk[k];save();renPsmf()}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MEAL PREP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setPrepWk(i){S.prepWk=i;save();renPrep()}
function renPrep(){
renWeekSel('prepWeekSel',S.prepWk,'setPrepWk');
document.getElementById('prepWkLbl').textContent='TydzieÅ„ '+(S.prepWk+1);
let h='';const items=PREP[S.prepWk];
items.forEach((it,i)=>{
h+=`<div class="mp-day"><div class="mp-h">ğŸ“… Sesja ${i+1}</div><div class="mp-i">${it}</div></div>`;});
document.getElementById('prepC').innerHTML=h;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TIMER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let TM={s:0,run:false,int:null};
function tmSet(m){TM.s=m*60;tmUpd();document.getElementById('tmLbl').textContent=m+' min'}
function tmTog(){if(TM.run){clearInterval(TM.int);TM.run=false;document.getElementById('tmBtn').textContent='â–¶ï¸ Start';relWakeLock()}else{if(TM.s<=0)return;TM.run=true;reqWakeLock();document.getElementById('tmBtn').textContent='â¸ï¸ Pauza';TM.int=setInterval(()=>{TM.s--;tmUpd();if(TM.s<=0){clearInterval(TM.int);TM.run=false;document.getElementById('tmBtn').textContent='â–¶ï¸ Start';relWakeLock();vib(HAP.timer);try{const c=new(window.AudioContext||window.webkitAudioContext)();const o=c.createOscillator();const g=c.createGain();o.connect(g);g.connect(c.destination);o.frequency.value=880;o.type='sine';g.gain.value=.2;o.start();setTimeout(()=>o.stop(),500)}catch(e){}if('Notification' in window&&Notification.permission==='granted'){try{new Notification('Diet Master V7',{body:'â° Timer skoÅ„czony!',tag:'dm-timer'})}catch(e){}}toast('â° CZAS!')}},1000)}}
function tmRst(){clearInterval(TM.int);TM.run=false;TM.s=0;tmUpd();relWakeLock();document.getElementById('tmBtn').textContent='â–¶ï¸ Start';document.getElementById('tmLbl').textContent='Wybierz preset'}
function tmUpd(){const m=Math.floor(TM.s/60),s=TM.s%60;const t=String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');document.getElementById('tmDisp').textContent=t;
const fs=document.getElementById('fsTime');if(fs)fs.textContent=t}



// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MEAL CHECKBOXES + COMPLIANCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function mealKey(dayOffset){
const d=new Date();d.setDate(d.getDate()+dayOffset);
return d.toISOString().split('T')[0];
}
function toggleMeal(wi,di,mi){
const k=mealKey(0)+'-'+mi;
if(!S.mealChk)S.mealChk={};
S.mealChk[k]=!S.mealChk[k];
save();updDash();renPlan();updCompliance();
toast(S.mealChk[k]?'PosiÅ‚ek âœ“':'Odznaczono');
vib(S.mealChk[k]?HAP.done:HAP.remove);updBadge();
}
function isMealDone(mi){
const k=mealKey(0)+'-'+mi;
return S.mealChk&&S.mealChk[k];
}
function todayMealsDone(){
const d=WEEKS[getCurWk()][getCurDi()];
let done=0;
d.meals.forEach((m,i)=>{if(isMealDone(i))done++});
return {done,total:d.meals.length};
}
function getCurDi(){const dow=new Date().getDay();return dow===0?6:dow-1;}
function getCurWk(){
if(S.startDate){
const start=new Date(S.startDate);const now=new Date();
start.setHours(0,0,0,0);now.setHours(0,0,0,0);
const days=Math.floor((now-start)/(86400000));
const weeks=Math.floor(days/7);
return weeks%4;
}
return S.wk;
}
function updCompliance(){
if(!S.mealChk)S.mealChk={};
const bar=document.getElementById('compBar');
const lbl=document.getElementById('compLbl');
const dayNames=['PON','WTO','ÅšRO','CZW','PIÄ„','SOB','NIE'];
let bh='',lh='',weekDone=0,weekTotal=0;
const today=new Date();const dow=today.getDay();const mondayOff=dow===0?-6:1-dow;
for(let i=0;i<7;i++){
const d=new Date(today);d.setDate(today.getDate()+mondayOff+i);
const dk=d.toISOString().split('T')[0];
const wi=getCurWk();const dayData=WEEKS[wi][i];
const total=dayData.meals.length;
let done=0;
dayData.meals.forEach((m,mi)=>{if(S.mealChk[dk+'-'+mi])done++});
const pct=total>0?Math.round(done/total*100):0;
weekDone+=done;weekTotal+=total;
const isToday=dk===mealKey(0);
const color=pct===100?'var(--gr)':pct>0?'var(--yl)':'var(--bg5)';
const border=isToday?';border:2px solid var(--or)':'';
bh+=`<div class="cbar-d" style="height:${Math.max(4,pct)}%;background:${color}${border}"><span class="cbar-v">${pct>0?pct+'%':''}</span></div>`;
lh+=`<span style="${isToday?'color:var(--or);font-weight:700':''}">${dayNames[i]}</span>`;
}
bar.innerHTML=bh;lbl.innerHTML=lh;
const weekPct=weekTotal>0?Math.round(weekDone/weekTotal*100):0;
document.getElementById('compPct').textContent=weekPct+'% ten tydzieÅ„';
// Update streak
const {done:td,total:tt}=todayMealsDone();
document.getElementById('dStr').textContent=td+'/'+tt;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AUTO-WEEK ROTATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function awUpdate(){
if(S.startDate){
const wk=getCurWk();
const di=getCurDi();
const dayNames=['PON','WTO','ÅšRO','CZW','PIÄ„','SOB','NIE'];
const start=new Date(S.startDate);const now=new Date();
start.setHours(0,0,0,0);now.setHours(0,0,0,0);
const totalDays=Math.floor((now-start)/86400000)+1;
document.getElementById('awWk').textContent='T'+(wk+1);
document.getElementById('awDay').textContent=dayNames[di]+' â€¢ DzieÅ„ '+totalDays;
document.getElementById('awSet').textContent='ğŸ“… '+S.startDate;
// Sync week selector
if(S.wk!==wk){S.wk=wk;save();renPlan();renShop();renPrep();}
}else{
document.getElementById('awWk').textContent='T'+(S.wk+1);
document.getElementById('awDay').textContent='Ustaw datÄ™ startu â†’';
document.getElementById('awSet').textContent='âš™ï¸ Ustaw start';
}
}
function awConfig(){
document.getElementById('awModal').style.display='flex';
if(S.startDate)document.getElementById('awDate').value=S.startDate;
else document.getElementById('awDate').value=new Date().toISOString().split('T')[0];
}
function awSave(){
const d=document.getElementById('awDate').value;
if(!d){toast('Wybierz datÄ™',false);return}
S.startDate=d;save();
awClose();awUpdate();updDash();renPlan();renShop();renPrep();updCompliance();
toast('Auto-rotacja wÅ‚Ä…czona âœ“');
}
function awClear(){
delete S.startDate;save();
awClose();awUpdate();updDash();
toast('Auto-rotacja wyÅ‚Ä…czona');
}
function awClose(){document.getElementById('awModal').style.display='none'}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RECIPE SCALING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let SCALE=1;
function setScale(s){
SCALE=s;renPlan();
toast(s===1?'Porcja Ã—1':'Porcja Ã—'+s+' (batch cooking)');
}
function scaleIng(ing){
if(SCALE===1)return ing;
return ing.replace(/(\d+(?:[.,]\d+)?)\s*(g|kg|ml|szt|kaps|Å‚yÅ¼)/g,(m,n,u)=>{
const num=parseFloat(n.replace(',','.'));
const scaled=Math.round(num*SCALE);
return scaled+u;
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PWA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HAPTIC PATTERNS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const HAP={
tap:[15],
done:[30,30,50],
add:[20,15,20],
remove:[10,10,10],
warn:[50,50,50,50,100],
timer:[200,100,200,100,400],
scan:[80],
shake:[40,40,80],
nav:[10]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CUSTOM SHOPPING LIST GENERATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let sgSelWk=0;
let sgSelected={}; // key: 'wk-day' â†’ bool

function sgInit(){
let wh='';for(let i=0;i<4;i++)wh+=`<div class="ws ${sgSelWk===i?'on':''}" onclick="sgSetWk(${i})" style="font-size:.75em;padding:6px">T${i+1}</div>`;
document.getElementById('sgWeekBtns').innerHTML=wh;
const dayNames=['PON','WTO','ÅšRO','CZW','PIÄ„','SOB','NIE'];
let dh='';WEEKS[sgSelWk].forEach((d,i)=>{
const k=sgSelWk+'-'+i;const sel=sgSelected[k];
dh+=`<div class="sg-day ${sel?'sel':''}" onclick="sgTogDay('${k}')">${d.n}<br><span style="font-size:.65em;opacity:.6">${d.bdgT}</span></div>`;
});
document.getElementById('sgDays').innerHTML=dh;
}
function sgSetWk(w){sgSelWk=w;sgInit()}
function sgTogDay(k){sgSelected[k]=!sgSelected[k];vib(HAP.tap);sgInit()}
function sgClear(){sgSelected={};sgInit();document.getElementById('sgResult').innerHTML='';vib(HAP.remove)}

function sgGenerate(){
const keys=Object.keys(sgSelected).filter(k=>sgSelected[k]);
if(!keys.length){toast('Zaznacz min. 1 dzieÅ„',false);return}

// Parse all ingredients
const items={};
keys.forEach(k=>{
const [wk,di]=k.split('-').map(Number);
const day=WEEKS[wk][di];
day.meals.forEach(m=>{
if(!m.ing)return;
m.ing.split('Â·').forEach(part=>{
part=part.trim();
if(!part||part.startsWith('+')||part.startsWith('supl'))return;
// Parse "400g pierÅ› surowa" or "5ml olej" or "2 jajka"
const match=part.match(/^(\d+(?:[.,]\d+)?)\s*(g|kg|ml|szt|kaps|Å‚yÅ¼)?\s*(.+)/i);
if(match){
const amt=parseFloat(match[1].replace(',','.'));
const unit=(match[2]||'szt').toLowerCase();
let name=match[3].trim().toLowerCase();
// Normalize names
name=name.replace(/\s*(mroÅ¼one|mroÅ¼ony|mroÅ¼ona|surowa|surowy|gotowana|gotowany)\s*/g,' ').trim();
name=name.replace(/\s+/g,' ');
const nk=name+'|'+unit;
if(!items[nk])items[nk]={name,unit,amt:0,count:0};
items[nk].amt+=amt;items[nk].count++;
}else{
// No amount found, just list it
const nk=part.toLowerCase()+'|szt';
if(!items[nk])items[nk]={name:part.toLowerCase(),unit:'szt',amt:1,count:0};
items[nk].count++;
}
});
});
});

// Sort by category heuristic
const sorted=Object.values(items).sort((a,b)=>{
const cat=n=>{
if(/pierÅ›|serca|wÄ…trÃ³bka|kurczak|jaj|biaÅ‚k/.test(n))return 0;
if(/twarÃ³g|mleko|jogurt|Å›mietan/.test(n))return 1;
if(/ryÅ¼|kasza|makaron|pÅ‚atki|bulgur|kuskus|ziemniak|spaghetti/.test(n))return 2;
if(/brokul|szpinak|marchew|cebul|ogÃ³rek|saÅ‚at|warzyw|kalafior|cukinia|pomidor|groszek|fasolka|pieczark/.test(n))return 3;
if(/banan|owoc|cytry/.test(n))return 4;
return 5;
};
return cat(a.name)-cat(b.name);
});

const catNames=['ğŸ”´ BiaÅ‚ko','ğŸ§€ NabiaÅ‚','ğŸŸ¡ WÄ™gle','ğŸŸ¢ Warzywa','ğŸŒ Owoce','âš™ï¸ Inne'];
let curCat=-1;
let h=`<div style="margin-top:10px;font-size:.78em;color:var(--t3)">${keys.length} dni zaznaczonych â€” ${sorted.length} produktÃ³w</div>`;

sorted.forEach(it=>{
const cat=(/pierÅ›|serca|wÄ…trÃ³bka|kurczak|jaj|biaÅ‚k/.test(it.name))?0:
(/twarÃ³g|mleko|jogurt|Å›mietan/.test(it.name))?1:
(/ryÅ¼|kasza|makaron|pÅ‚atki|bulgur|kuskus|ziemniak|spaghetti/.test(it.name))?2:
(/brokul|szpinak|marchew|cebul|ogÃ³rek|saÅ‚at|warzyw|kalafior|cukinia|pomidor|groszek|fasolka|pieczark/.test(it.name))?3:
(/banan|owoc|cytry/.test(it.name))?4:5;
if(cat!==curCat){curCat=cat;h+=`<div style="color:var(--or);font-weight:700;font-size:.82em;margin-top:10px;padding-top:6px;border-top:1px solid var(--brd)">${catNames[cat]}</div>`}

let display=it.amt;let unit=it.unit;
// Convert g to kg
if(unit==='g'&&display>=1000){display=Math.round(display/100)/10;unit='kg'}
else{display=Math.round(display)}

const name=it.name.charAt(0).toUpperCase()+it.name.slice(1);
h+=`<div class="sg-item"><span class="sg-n">${name}</span><span class="sg-a">${display}${unit}</span></div>`;
});

document.getElementById('sgResult').innerHTML=h;
vib(HAP.done);toast('Lista gotowa âœ“');
}

async function sgShare(){
const el=document.getElementById('sgResult');
if(!el||!el.textContent.trim()){toast('Najpierw generuj listÄ™',false);return}
const items=el.querySelectorAll('.sg-item');
let text='ğŸ›’ Lista zakupÃ³w (Diet Master V7)\n\n';
items.forEach(it=>{
const n=it.querySelector('.sg-n')?.textContent||'';
const a=it.querySelector('.sg-a')?.textContent||'';
text+=`â˜ ${n} â€” ${a}\n`;
});
if(navigator.share){
try{await navigator.share({title:'Lista zakupÃ³w',text});toast('UdostÄ™pniono âœ“')}catch(e){}
}else{
navigator.clipboard.writeText(text).then(()=>toast('Skopiowano âœ“')).catch(()=>{});
}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BARCODE SCANNER (html5-qrcode + Open Food Facts)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let scanner=null;
function scanStart(){
if(!window.Html5Qrcode){toast('ÅadujÄ™ skaner...',false);
const s=document.createElement('script');s.src='https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js';
s.onload=()=>scanStart();document.head.appendChild(s);return}
if(scanner)scanStop();
scanner=new Html5Qrcode('scanReader');
scanner.start({facingMode:'environment'},{fps:10,qrbox:{width:250,height:150},
formatsToSupport:[0]}, // EAN_13
code=>{vib(HAP.scan);scanStop();eanLookup(code)},
()=>{}
).then(()=>{
document.getElementById('scanStartBtn').style.display='none';
document.getElementById('scanStopBtn').style.display='';
}).catch(e=>toast('Kamera: '+e,false));
}
function scanStop(){
if(scanner){try{scanner.stop().then(()=>{scanner.clear()}).catch(()=>{})}catch(e){}}
scanner=null;
document.getElementById('scanStartBtn').style.display='';
document.getElementById('scanStopBtn').style.display='none';
}
async function eanLookup(code){
code=code.trim();if(!code||code.length<8){toast('Za krÃ³tki kod',false);return}
document.getElementById('scanResult').innerHTML='<div class="al info">â³ Szukam produktu...</div>';
try{
const r=await fetch(`https://world.openfoodfacts.org/api/v2/product/${code}.json`);
const d=await r.json();
if(d.status===1){
const p=d.product;const n100=p.nutriments||{};
const res={
ean:code,
name:p.product_name||p.product_name_pl||'Nieznany',
brand:p.brands||'',
img:p.image_front_small_url||'',
kcal:Math.round(n100['energy-kcal_100g']||0),
b:+(n100.proteins_100g||0).toFixed(1),
w:+(n100.carbohydrates_100g||0).toFixed(1),
t:+(n100.fat_100g||0).toFixed(1),
fiber:+(n100.fiber_100g||0).toFixed(1),
serving:p.serving_size||'100g',
ts:Date.now()
};
renderScanResult(res);
saveScanHist(res);
}else{
document.getElementById('scanResult').innerHTML='<div class="al warn">âŒ Produkt nie znaleziony w Open Food Facts</div>';
}
}catch(e){
document.getElementById('scanResult').innerHTML='<div class="al err">âŒ Brak internetu lub bÅ‚Ä…d API</div>';
}
}
function renderScanResult(r){
document.getElementById('scanResult').innerHTML=`
<div class="scan-result">
${r.img?`<img src="${r.img}" style="width:60px;height:60px;border-radius:8px;float:right;margin-left:8px;object-fit:cover">`:''}
<div class="sr-name">${r.name}</div>
<div class="sr-brand">${r.brand} Â· EAN: ${r.ean}</div>
<div style="font-size:.75em;color:var(--t3)">WartoÅ›ci na 100g${r.serving!=='100g'?' Â· Porcja: '+r.serving:''}</div>
<div class="scan-macro">
<div class="sm"><div class="v">${r.kcal}</div><div class="l">Kcal</div></div>
<div class="sm"><div class="v" style="color:var(--bl)">${r.b}g</div><div class="l">BiaÅ‚ko</div></div>
<div class="sm"><div class="v" style="color:var(--yl)">${r.w}g</div><div class="l">WÄ™gle</div></div>
<div class="sm"><div class="v" style="color:var(--pr)">${r.t}g</div><div class="l">TÅ‚uszcz</div></div>
</div>
${r.fiber?`<div style="margin-top:6px;font-size:.78em;color:var(--t2)">ğŸŒ± BÅ‚onnik: ${r.fiber}g/100g</div>`:''}
</div>`;
}
function saveScanHist(r){
if(!S.scanHist)S.scanHist=[];
S.scanHist=S.scanHist.filter(x=>x.ean!==r.ean);
S.scanHist.unshift(r);
if(S.scanHist.length>50)S.scanHist=S.scanHist.slice(0,50);
save();renScanHist();
}
function renScanHist(){
if(!S.scanHist||!S.scanHist.length){document.getElementById('scanHist').innerHTML='<div style="color:var(--t3);font-size:.82em;text-align:center">Brak skanÃ³w</div>';return}
let h='';S.scanHist.forEach(r=>{
h+=`<div class="scan-hi" onclick="renderScanResult(${JSON.stringify(r).replace(/"/g,'&quot;')})">
<span class="sh-n">${r.name}</span><span class="sh-k">${r.kcal} kcal</span></div>`;
});
document.getElementById('scanHist').innerHTML=h;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PHOTO DIARY (Camera + IndexedDB)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let photoDB=null;
function initPhotoDB(){
return new Promise((res,rej)=>{
const req=indexedDB.open('dmv7photos',1);
req.onupgradeneeded=e=>{const db=e.target.result;if(!db.objectStoreNames.contains('photos'))db.createObjectStore('photos',{keyPath:'id',autoIncrement:true})};
req.onsuccess=e=>{photoDB=e.target.result;res()};
req.onerror=()=>rej();
});
}
function photoTake(){document.getElementById('photoCapture').click()}
function photoProcess(e){
const file=e.target.files[0];if(!file)return;
const reader=new FileReader();
reader.onload=function(ev){
const img=new Image();
img.onload=function(){
const max=800;let w=img.width,h=img.height;
if(w>max){h=h*max/w;w=max}
if(h>max){w=w*max/h;h=max}
const cv=document.createElement('canvas');cv.width=w;cv.height=h;
const ctx=cv.getContext('2d');ctx.drawImage(img,0,0,w,h);
const data=cv.toDataURL('image/jpeg',0.7);
photoStore(data);
};
img.src=ev.target.result;
};
reader.readAsDataURL(file);
e.target.value='';
}
function photoStore(data){
if(!photoDB){toast('DB error',false);return}
const tx=photoDB.transaction('photos','readwrite');
const st=tx.objectStore('photos');
st.add({data,date:new Date().toISOString(),label:''});
tx.oncomplete=()=>{toast('ğŸ“¸ ZdjÄ™cie zapisane âœ“');vib(HAP.done);photoRender()};
}
function photoRender(){
if(!photoDB)return;
const tx=photoDB.transaction('photos','readonly');
const st=tx.objectStore('photos');
const req=st.getAll();
req.onsuccess=()=>{
const photos=req.result.reverse();
document.getElementById('photoCount').textContent=photos.length+' zdjÄ™Ä‡';
if(!photos.length){document.getElementById('photoGrid').innerHTML='<div style="color:var(--t3);font-size:.82em;text-align:center;grid-column:1/-1;padding:20px">Brak zdjÄ™Ä‡. ZrÃ³b pierwsze!</div>';return}
let h='';photos.forEach(p=>{
const d=new Date(p.date);
const dt=d.toLocaleDateString('pl-PL',{day:'numeric',month:'short'})+' '+d.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'});
h+=`<div class="photo-card"><img src="${p.data}" loading="lazy"><div class="pc-info">${dt}</div><button class="pc-del" onclick="event.stopPropagation();photoDel(${p.id})">âœ•</button></div>`;
});
document.getElementById('photoGrid').innerHTML=h;
};
}
function photoDel(id){
if(!photoDB)return;
const tx=photoDB.transaction('photos','readwrite');
tx.objectStore('photos').delete(id);
tx.oncomplete=()=>{toast('UsuniÄ™to');photoRender()};
}
function photoClear(){
if(!confirm('UsunÄ…Ä‡ WSZYSTKIE zdjÄ™cia?'))return;
if(!photoDB)return;
const tx=photoDB.transaction('photos','readwrite');
tx.objectStore('photos').clear();
tx.oncomplete=()=>{toast('ZdjÄ™cia usuniÄ™te');photoRender()};
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GEOLOCATION â€” znajdÅº sklep
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function findStore(name){
if(!navigator.geolocation){toast('Brak GPS',false);return}
toast('ğŸ“ Szukam lokalizacji...');
navigator.geolocation.getCurrentPosition(
pos=>{const{latitude:lat,longitude:lng}=pos.coords;
window.open(`https://www.google.com/maps/search/${encodeURIComponent(name)}/@${lat},${lng},14z`,'_blank')},
err=>{toast('GPS odmÃ³wiony: '+err.message,false)},
{enableHighAccuracy:false,timeout:8000}
);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OFFLINE INDICATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initOffline(){
const bar=document.getElementById('offBar');
function upd(){bar.classList.toggle('on',!navigator.onLine)}
window.addEventListener('online',()=>{upd();toast('ğŸŒ Online')});
window.addEventListener('offline',()=>{upd();toast('ğŸ“¡ Offline',false)});
upd();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FULLSCREEN TIMER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let fsInterval=null;
function tmFullscreen(){
const el=document.getElementById('fsTimer');
el.classList.add('on');
try{el.requestFullscreen&&el.requestFullscreen()}catch(e){}
updFsTimer();
if(fsInterval)clearInterval(fsInterval);
fsInterval=setInterval(updFsTimer,250);
}
function fsClose(){
const el=document.getElementById('fsTimer');
el.classList.remove('on');
try{document.exitFullscreen&&document.exitFullscreen()}catch(e){}
if(fsInterval){clearInterval(fsInterval);fsInterval=null}
}
function updFsTimer(){
const m=Math.floor(TM.s/60),s=TM.s%60;
const t=String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
document.getElementById('fsTime').textContent=t;
document.getElementById('fsLbl').textContent=document.getElementById('tmLbl').textContent;
document.getElementById('fsTmBtn').textContent=TM.run?'â¸ï¸ Pauza':'â–¶ï¸ Start';
if(TM.s<=0&&!TM.run&&fsInterval){/* timer done, keep screen */}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHAKE TO ADD WATER (DeviceMotion)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let shakeReady=true;let lastShake=0;
function initShake(){
if(!('DeviceMotionEvent' in window)){
const h=document.getElementById('shakeHint');if(h)h.style.display='none';return}
// iOS 13+ requires permission
if(typeof DeviceMotionEvent.requestPermission==='function'){
document.getElementById('shakeHint').innerHTML='ğŸ“³ <a href="#" onclick="reqShakePerm();return false" style="color:var(--cy)">Kliknij aby wÅ‚Ä…czyÄ‡ shake</a>';
}else{
window.addEventListener('devicemotion',handleShake);
}
}
function reqShakePerm(){
DeviceMotionEvent.requestPermission().then(p=>{
if(p==='granted'){window.addEventListener('devicemotion',handleShake);
document.getElementById('shakeHint').textContent='ğŸ“³ PotrzÄ…Å›nij telefonem â†’ +250ml';toast('Shake wÅ‚Ä…czony âœ“')}
}).catch(()=>{});
}
function handleShake(e){
const a=e.accelerationIncludingGravity;if(!a)return;
const force=Math.abs(a.x)+Math.abs(a.y)+Math.abs(a.z);
const now=Date.now();
if(force>35&&shakeReady&&now-lastShake>2000){
lastShake=now;shakeReady=false;
// Only trigger if water section is visible
const ws=document.getElementById('woda');
if(ws&&ws.classList.contains('on')){watA(250)}
setTimeout(()=>{shakeReady=true},2000);
}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME TOGGLE (dark/light)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleTheme(){
const isLight=document.body.classList.toggle('light');
S.theme=isLight?'light':'dark';save();
document.getElementById('themeBtn').textContent=isLight?'â˜€ï¸':'ğŸŒ™';
document.querySelector('meta[name="theme-color"]').content=isLight?'#f5f5f5':'#ff6b2b';
toast(isLight?'Tryb jasny':'Tryb ciemny');
}
function loadTheme(){
if(S.theme==='light'){document.body.classList.add('light');
document.getElementById('themeBtn').textContent='â˜€ï¸';
document.querySelector('meta[name="theme-color"]').content='#f5f5f5'}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEB SPEECH â€” czytaj przepis na gÅ‚os
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentSpeech=null;
function speakRecipe(text){
if(!('speechSynthesis' in window)){toast('Brak wsparcia mowy',false);return}
if(speechSynthesis.speaking){speechSynthesis.cancel();toast('Zatrzymano');return}
const u=new SpeechSynthesisUtterance(text);
u.lang='pl-PL';u.rate=0.9;u.pitch=1;
const voices=speechSynthesis.getVoices();
const plVoice=voices.find(v=>v.lang.startsWith('pl'));
if(plVoice)u.voice=plVoice;
u.onend=()=>toast('ğŸ”Š Koniec');
speechSynthesis.speak(u);
toast('ğŸ”Š Czytam przepis...');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WAKE LOCK API â€” ekran nie gaÅ›nie podczas timera
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let wakeLock=null;
async function reqWakeLock(){
try{if('wakeLock' in navigator){wakeLock=await navigator.wakeLock.request('screen');
wakeLock.addEventListener('release',()=>{wakeLock=null})}}catch(e){}}
function relWakeLock(){if(wakeLock){wakeLock.release();wakeLock=null}}
document.addEventListener('visibilitychange',()=>{if(document.visibilityState==='visible'&&TM.run)reqWakeLock()});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VIBRATION API â€” wibracja przy timerze i meal check
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function vib(pattern){try{if('vibrate' in navigator)navigator.vibrate(pattern)}catch(e){}}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BADGING API â€” licznik niezjedzonych posiÅ‚kÃ³w na ikonie
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updBadge(){
try{
if(!('setAppBadge' in navigator))return;
const {done,total}=todayMealsDone();
const left=total-done;
if(left>0)navigator.setAppBadge(left);
else navigator.clearAppBadge();
}catch(e){}}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEB SHARE API â€” udostÄ™pnij postÄ™p
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function shareProgress(){
const wk=getCurWk();const di=getCurDi();const d=WEEKS[wk][di];
const {done,total}=todayMealsDone();
const lastW=S.w.length?S.w[S.w.length-1].w:100;
const lost=Math.max(0,100-lastW).toFixed(1);
const water=(S.water/1000).toFixed(1);

const text=`ğŸ”¥ Diet Master V7 â€” DzieÅ„ ${['PON','WTO','ÅšRO','CZW','PIÄ„','SOB','NIE'][di]} (T${wk+1})
âš–ï¸ Waga: ${lastW} kg (${lost} kg stracone)
ğŸ½ï¸ PosiÅ‚ki: ${done}/${total}
ğŸ’§ Woda: ${water}L / 5L
ğŸ“Š Cel: ${d.kcal} kcal | ${d.b}g biaÅ‚ka
ğŸ’ª Cel wagowy: 82 kg (zostaÅ‚o ${Math.max(0,lastW-82).toFixed(1)} kg)`;

if(navigator.share){
try{await navigator.share({title:'Diet Master V7 â€” PostÄ™p',text});toast('UdostÄ™pniono âœ“')}
catch(e){if(e.name!=='AbortError')fallbackCopy(text)}}
else fallbackCopy(text);
}
function fallbackCopy(text){
navigator.clipboard.writeText(text).then(()=>toast('Skopiowano do schowka âœ“')).catch(()=>toast('Brak wsparcia',false));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA EXPORT / IMPORT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function dataExport(){
const data=JSON.stringify(S,null,2);
const blob=new Blob([data],{type:'application/json'});
const url=URL.createObjectURL(blob);
const a=document.createElement('a');
a.href=url;
const dt=new Date().toISOString().split('T')[0];
a.download=`diet-master-v7-backup-${dt}.json`;
a.click();URL.revokeObjectURL(url);
toast('Backup pobrany âœ“');
}
function dataImport(e){
const file=e.target.files[0];if(!file)return;
const reader=new FileReader();
reader.onload=function(ev){
try{
const data=JSON.parse(ev.target.result);
if(!confirm('âš ï¸ Na pewno nadpisaÄ‡ dane? Stracisz obecne.'))return;
S=data;save();
init();toast('Dane zaimportowane âœ“');
}catch(err){toast('BÅ‚Ä…d pliku JSON',false)}
};reader.readAsText(file);
e.target.value='';
}
function dataClear(){
if(!confirm('âš ï¸ USUNÄ„Ä† WSZYSTKIE DANE? Tej operacji nie cofniesz!'))return;
if(!confirm('Na pewno? Waga, woda, suplementy â€” wszystko zniknie.'))return;
localStorage.removeItem(LS);S={};load();save();
init();toast('Dane usuniÄ™te');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PERSISTENT STORAGE â€” poproÅ› o trwaÅ‚y storage
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function reqPersist(){
if(!navigator.storage||!navigator.storage.persist){
document.getElementById('persistSt').textContent='Brak wsparcia';return}
const ok=await navigator.storage.persist();
document.getElementById('persistSt').textContent=ok?'âœ… TrwaÅ‚y â€” dane nie zostanÄ… usuniÄ™te':'âŒ OdmÃ³wiono';
toast(ok?'Storage trwaÅ‚y âœ“':'OdmÃ³wiono',ok);
}
async function checkPersist(){
if(!navigator.storage||!navigator.storage.persisted)return;
const p=await navigator.storage.persisted();
const el=document.getElementById('persistSt');
if(el)el.textContent=p?'âœ… TrwaÅ‚y':'âš ï¸ NietrwaÅ‚y â€” dane mogÄ… zniknÄ…Ä‡';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PWA STATUS â€” pokaÅ¼ co dziaÅ‚a
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updPwaStatus(){
const el=document.getElementById('pwaStatus');if(!el)return;
const standalone=window.matchMedia('(display-mode: standalone)').matches||navigator.standalone;
const sw='serviceWorker' in navigator;
const notif='Notification' in window;
const share='share' in navigator;
const badge='setAppBadge' in navigator;
const wake='wakeLock' in navigator;
const vibr='vibrate' in navigator;
const persist=navigator.storage&&navigator.storage.persist;
const cam=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);
const geo='geolocation' in navigator;
const speech='speechSynthesis' in window;
const motion='DeviceMotionEvent' in window;
const idb='indexedDB' in window;
const fscr=document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen;
function ck(ok,name){var col=ok?"var(--gr)":"var(--rd)";var ico=ok?"âœ…":"âŒ";return "<span style='color:"+col+"'>"+ico+" "+name+"</span>"}
el.innerHTML=[
ck(standalone,'Tryb standalone'),
ck(sw,'Service Worker (offline)'),
ck(notif,'Powiadomienia'),
ck(share,'Web Share API'),
ck(badge,'Badging API (ikona)'),
ck(wake,'Wake Lock (timer)'),
ck(vibr,'Wibracja'),
ck(persist,'Persistent Storage'),
ck(cam,'Kamera (skaner/zdjÄ™cia)'),
ck(geo,'Geolokalizacja (sklepy)'),
ck(speech,'Web Speech (czytanie)'),
ck(motion,'DeviceMotion (shake)'),
ck(idb,'IndexedDB (zdjÄ™cia)'),
ck(fscr,'Fullscreen API (timer)')
].join('<br>');
}

let deferredPrompt=null;
function initPWA(){
if('serviceWorker' in navigator){
navigator.serviceWorker.register('./sw.js').catch(e=>console.log('SW fail:',e));
// Listen for updates from SW
navigator.serviceWorker.addEventListener('message',e=>{
if(e.data.type==='UPDATE_READY')toast('ğŸ”„ Nowa wersja! OdÅ›wieÅ¼.');
if(e.data.type==='UPDATE_BADGE')updBadge();
});
}
window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e;
document.getElementById('pwaBar').style.display='flex';});
// Handle shortcuts via hash
if(location.hash){const sec=location.hash.slice(1);if(document.getElementById(sec))setTimeout(()=>go(sec),100);}
// Handle shared text
const params=new URLSearchParams(location.search);
const shared=params.get('shared_text');
if(shared)setTimeout(()=>{toast('Otrzymano: '+shared.slice(0,30));},500);
// Periodic sync for badge
if('serviceWorker' in navigator){
navigator.serviceWorker.ready.then(reg=>{
if(reg.periodicSync)reg.periodicSync.register('update-badge',{minInterval:3600000}).catch(()=>{});
}).catch(()=>{});
}
}
function pwaInstall(){
if(deferredPrompt){deferredPrompt.prompt();
deferredPrompt.userChoice.then(r=>{document.getElementById('pwaBar').style.display='none';deferredPrompt=null;
if(r.outcome==='accepted')toast('Zainstalowano! ğŸ“±');});}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NOTIFICATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const NOTIF_TIMES=[
{h:4,m:0,msg:'ğŸ¥¤ Czas na shake! WstaÅ„ i wstrzÄ…Å›nij.'},
{h:9,m:50,msg:'ğŸ’§ Za 10 min elektrolity! Przygotuj shaker.'},
{h:15,m:45,msg:'ğŸ— Czas gotowaÄ‡ obiad! SprawdÅº plan.'},
{h:21,m:0,msg:'ğŸŒ™ MSM + Glicyna shot. Przygotuj na noc.'},
{h:22,m:0,msg:'ğŸ˜´ Melatonina + PROZMA+. Dobranoc!'}
];
function notifReq(){
if(!('Notification' in window)){toast('Brak wsparcia',false);return}
Notification.requestPermission().then(p=>{
if(p==='granted'){S.notifOn=true;save();document.getElementById('notifBar').style.display='none';toast('Powiadomienia wÅ‚Ä…czone ğŸ””');startNotifCheck();}
else{toast('OdmÃ³wiono',false)}
});
}
function notifDismiss(){S.notifDismissed=true;save();document.getElementById('notifBar').style.display='none'}
function startNotifCheck(){
if(!S.notifOn)return;
setInterval(()=>{
const now=new Date();const h=now.getHours(),m=now.getMinutes();
const key='notif-'+now.toDateString()+'-'+h+'-'+m;
if(S.notifSent&&S.notifSent[key])return;
NOTIF_TIMES.forEach(nt=>{
if(h===nt.h&&m===nt.m){
try{new Notification('Diet Master V7',{body:nt.msg,icon:'ğŸ”¥',tag:'dm-'+nt.h})}catch(e){}
if(!S.notifSent)S.notifSent={};S.notifSent[key]=true;save();
}});
},30000); // check every 30s
}
function initNotif(){
if(S.notifOn&&Notification.permission==='granted'){
document.getElementById('notifBar').style.display='none';
startNotifCheck();
}else if(!S.notifDismissed&&'Notification' in window){
document.getElementById('notifBar').style.display='flex';
}else{
document.getElementById('notifBar').style.display='none';
}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function init(){
load();
if(!S.mealChk)S.mealChk={};
if(!S.notifSent)S.notifSent={};
if(!S.scanHist)S.scanHist=[];
document.getElementById('dIn').value=new Date().toISOString().split('T')[0];
loadTheme();initPWA();initNotif();initOffline();initShake();awUpdate();
updDash();renPlan();renShop();renWaga();renWat();renSupp();renPsmf();renPrep();updCompliance();renScanHist();sgInit();
updBadge();checkPersist();updPwaStatus();
initPhotoDB().then(()=>photoRender()).catch(()=>{});
}
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
